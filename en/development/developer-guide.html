<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>developer guide &mdash; releng-tool  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides_global.css" type="text/css" />
    <link rel="canonical" href="https://docs.releng.io/developer-guide.html"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="contributor guide" href="contributor-guide.html" />
    <link rel="prev" title="user guide" href="user-guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> releng-tool
          </a>
              <div class="version">
                development
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
    <div class="version-warning">development version | <a href="https://docs.releng.io/en/latest/">stable v0.8</a></div>
    
    
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">releng-tool</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="requirements.html">requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#quick-start">quick-start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#linux">linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="install.html#arch">arch</a></li>
<li class="toctree-l4"><a class="reference internal" href="install.html#centos">centos</a></li>
<li class="toctree-l4"><a class="reference internal" href="install.html#fedora">fedora</a></li>
<li class="toctree-l4"><a class="reference internal" href="install.html#opensuse">opensuse</a></li>
<li class="toctree-l4"><a class="reference internal" href="install.html#ubuntu">ubuntu</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="install.html#os-x">os x</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#windows">windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#development">development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">user guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user-guide.html#getting-started">getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide.html#understanding-rebuilds">understanding rebuilds</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide.html#tips">tips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#offline-builds">offline builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#parallel-builds">parallel builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#privileged-builds">privileged builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#license-generation">license generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user-guide.html#advanced-builder-capabilities">advanced builder capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#development-mode">development mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#local-sources-mode">local-sources mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide.html#configuration-overrides">configuration overrides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user-guide.html#extraction-tool-overrides">extraction tool overrides</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-guide.html#revision-overrides">revision overrides</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-guide.html#site-overrides">site overrides</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-guide.html#tool-overrides">tool overrides</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-guide.html#quirks">quirks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">developer guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prelude">prelude</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#actually-getting-started">actually getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#releng-configuration">releng configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packages">packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-package-configurations">common package configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-dependencies">LIBFOO_DEPENDENCIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-install-type">LIBFOO_INSTALL_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-license">LIBFOO_LICENSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-license-files">LIBFOO_LICENSE_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-site">LIBFOO_SITE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-type">LIBFOO_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-version">LIBFOO_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-package-configurations">advanced package configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-build-subdir">LIBFOO_BUILD_SUBDIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-devmode-ignore-cache">LIBFOO_DEVMODE_IGNORE_CACHE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-devmode-revision">LIBFOO_DEVMODE_REVISION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-extension">LIBFOO_EXTENSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-external">LIBFOO_EXTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-extopt">LIBFOO_EXTOPT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-extract-type">LIBFOO_EXTRACT_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-fixed-jobs">LIBFOO_FIXED_JOBS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-git-config">LIBFOO_GIT_CONFIG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-git-depth">LIBFOO_GIT_DEPTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-git-refspecs">LIBFOO_GIT_REFSPECS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-git-submodules">LIBFOO_GIT_SUBMODULES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-git-verify-revision">LIBFOO_GIT_VERIFY_REVISION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-internal">LIBFOO_INTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-no-extraction">LIBFOO_NO_EXTRACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-prefix">LIBFOO_PREFIX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-revision">LIBFOO_REVISION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-skip-remote-config">LIBFOO_SKIP_REMOTE_CONFIG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-skip-remote-scripts">LIBFOO_SKIP_REMOTE_SCRIPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-strip-count">LIBFOO_STRIP_COUNT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-vcs-type">LIBFOO_VCS_TYPE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#package-bootstrapping-and-post-processing">package bootstrapping and post-processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#site-definitions">site definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bazaar-site">bazaar site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cvs-site">cvs site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#git-site">git site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mercurial-site">mercurial site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scp-site">scp site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#svn-site">svn site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#url-site-default">url site (default)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hash-file">hash file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ascii-armor">ascii armor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#script-package-default">script package (default)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autotools-package">autotools package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-autotools-autoreconf">LIBFOO_AUTOTOOLS_AUTORECONF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-build-defs">LIBFOO_BUILD_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-build-env">LIBFOO_BUILD_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-build-opts">LIBFOO_BUILD_OPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-conf-defs">LIBFOO_CONF_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-conf-env">LIBFOO_CONF_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-conf-opts">LIBFOO_CONF_OPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-install-defs">LIBFOO_INSTALL_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-install-env">LIBFOO_INSTALL_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-install-opts">LIBFOO_INSTALL_OPTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cmake-package">cmake package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cmake-build-defs">LIBFOO_BUILD_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-build-env">LIBFOO_BUILD_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-build-opts">LIBFOO_BUILD_OPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-conf-defs">LIBFOO_CONF_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-conf-env">LIBFOO_CONF_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-conf-opts">LIBFOO_CONF_OPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-install-defs">LIBFOO_INSTALL_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-install-env">LIBFOO_INSTALL_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-install-opts">LIBFOO_INSTALL_OPTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#python-package">python package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#python-build-defs">LIBFOO_BUILD_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-build-env">LIBFOO_BUILD_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-build-opts">LIBFOO_BUILD_OPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-install-defs">LIBFOO_INSTALL_DEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-install-env">LIBFOO_INSTALL_ENV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-install-opts">LIBFOO_INSTALL_OPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libfoo-python-interpreter">LIBFOO_PYTHON_INTERPRETER</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other">other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#post-processing">post-processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#licenses">licenses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#patching">patching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internal-and-external-packages">internal and external packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#script-helpers">script helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vcs-ignore">vcs ignore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quirks">quirks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-extensions">loading extensions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributor-guide.html">contributor guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#contributing">contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#root-directory">root directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#fetching-design">fetching design</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#extraction-design">extraction design</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#host-and-build-environment">host and build environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#extensions">extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributor-guide.html#documentation">documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">tips</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tips.html#examples">examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#requesting-help">requesting help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="annex-a.html">annex a - quick reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="annex-a.html#configuration-options">configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="annex-a.html#environment-variables">environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="annex-a.html#package-options">package options</a></li>
<li class="toctree-l2"><a class="reference internal" href="annex-a.html#script-helpers">script helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="annex-a.html#quirks">quirks</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">release notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#development">development</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id1">0.8 (2021-08-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id2">0.7 (2021-08-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id3">0.6 (2020-10-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id4">0.5 (2020-09-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id5">0.4 (2020-09-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id6">0.3 (2019-10-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id7">0.2 (2019-03-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#id8">0.1 (2019-02-24)</a></li>
</ul>
</li>
</ul>

<div><hr style="margin: 10px 0;" /></div>
<div>
    <a class="reference external" href="https://releng.io/">releng.io</a>
</div>
<div>
    <a class="reference external" href="https://github.com/releng-tool/releng-tool">releng-tool GitHub</a>
</div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">releng-tool</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>developer guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/developer-guide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="user-guide.html" class="btn btn-neutral float-left" title="user guide" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contributor-guide.html" class="btn btn-neutral float-right" title="contributor guide" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="developer-guide">
<h1>developer guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline"></a></h1>
<p>The following will outline details on how to prepare a releng-tool project to be
used to assist the release engineering of a project. For details on a user
interaction with releng-tool, consult the <a class="reference internal" href="user-guide.html"><span class="doc">user’s guide</span></a>.</p>
<div class="section" id="prelude">
<h2>prelude<a class="headerlink" href="#prelude" title="Permalink to this headline"></a></h2>
<p>A releng-tool project can define multiple packages, each can be based off of
different languages, configured to use custom toolchains and more. Every package
has multiple stages (such as fetching, configuring, building, etc.) which can
help contribute to a target sysroot. Once all packages are processed, the target
sysroot can be packaged for distribution.</p>
<p>The following outlines the (default) common directory/file locations for a
releng-tool project:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cache/</span></code> - cached content from select package sources (e.g. dvcs, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dl/</span></code> - archives for select package sources (e.g. <code class="docutils literal notranslate"><span class="pre">.tgz</span></code>, <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package/</span></code> - container for packages</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package/&lt;package&gt;/</span></code> - a package-specific folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package/&lt;package&gt;/&lt;package&gt;</span></code> - a package definition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/</span></code> - container for all output content</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/build/</span></code> - container for package building</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/host/</span></code> - area to hold host-specific content</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/images/</span></code> - container for final images/archives</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/staging/</span></code> - area to hold staged sysroot content</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/target/</span></code> - area to hold target sysroot content</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">releng</span></code> - project configuration</p></li>
</ul>
<p>How these directories and files are used can vary on how a developer defines a
releng-tool project. Consider the following example:</p>
<ol class="arabic simple">
<li><p>releng-tool will load the project’s configuration and respective package
definitions to determine what steps need to be performed.</p></li>
<li><p>Package sources can be downloaded into either the <code class="docutils literal notranslate"><span class="pre">cache/</span></code> or <code class="docutils literal notranslate"><span class="pre">dl/</span></code>
folder, depending on what type of sources will be fetched. For example, Git
sources will be stored inside of the <code class="docutils literal notranslate"><span class="pre">cache/</span></code> to take advantage of its
distributable nature, and archive files (such as <code class="docutils literal notranslate"><span class="pre">.tgz</span></code>, <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, etc.)
will be stored inside the <code class="docutils literal notranslate"><span class="pre">dl/</span></code> directory.</p></li>
<li><p>Each package will be extracted into its own output directory inside
<code class="docutils literal notranslate"><span class="pre">output/build/</span></code>. The working areas for packages allow a package to be
patched, configured and built based on how the developer configures the
respective packages.</p></li>
<li><p>Once packages are built, their final executables, libraries, etc. can be
installed into either the host area (<code class="docutils literal notranslate"><span class="pre">output/host/</span></code>), staging area
(<code class="docutils literal notranslate"><span class="pre">output/staging/</span></code>) or the target area (<code class="docutils literal notranslate"><span class="pre">output/target/</span></code>) depending on
what has been built. The target area is designed for the final set of assets
produced from a build; the intent is that the files contained inside this
folder are planned to be used on a target system (stripped, cross-compiled,
etc.). A staging area is like a target area but may contain more content such
as headers not intended for a final target, interim development assets, and
more. Host content is designed for content built for the host system which
other packages may depend on.</p></li>
<li><p>At the end of the releng-tool process, a post-stage script can be invoked to
help archive/package content from the target area (<code class="docutils literal notranslate"><span class="pre">output/target/</span></code>) into
the images folder (<code class="docutils literal notranslate"><span class="pre">output/images/</span></code>). For example, generating an archive
<code class="docutils literal notranslate"><span class="pre">output/images/my-awesome-project-v1.0.0.tgz</span></code>.</p></li>
</ol>
<p>Not all projects may use each of these folders or take advantage of each stage.
While various capabilities exist, it does not mean releng-tool will handle all
the nitty-gritty details to make a proper build of a project. For example:</p>
<ul class="simple">
<li><p>If a developer wishes to cross-compile a package to a target, they must ensure
the package is configured in the proper manner to use a desired toolchain.</p></li>
<li><p>If a developer wants to process a Python package, they must ensure the proper
interpreter is used if they cannot rely on the host’s default interpreter.</p></li>
<li><p>If a developer develops script-based packages, they must ensure that these
scripts properly handle multiple re-invokes (e.g. if a builder performs a
rebuild on a package).</p></li>
</ul>
<p>releng-tool will attempt to provide an easy way to deal with fetching sources,
ensuring projects are invoked in order, and more; however, the more advanced
features/actions a developer may want in their release engineering (like the
examples above), the more a developer will need to manage in their project.</p>
</div>
<div class="section" id="getting-started">
<h2>getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline"></a></h2>
<p>releng-tool is made on Python. This document will outline package definitions,
scripts and more which are most likely Python scripts, and in turn will be
invoked/processed by the releng-tool. While releng-tool supports running on
various host systems (e.g. Linux, OS X, Windows, etc.), this guide will
primarily show examples following a Unix-styled file system.</p>
<p>The following will provide a very simple script-based project solution to get
started. This example will make a project with two packages, setup a dependency
between them and setup scripts to help show a developer how packages are
processed. If there is no desire to make a simple project example, one may
venture to the <a class="reference internal" href="#actually-getting-started">actually getting started</a> section.</p>
<p>To start, make a new folder for the project, two sample packages and move into
the root folder:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> mkdir -p my-project/package/libx
<span class="gp">$</span> mkdir -p my-project/package/liby
<span class="gp">$</span> <span class="nb">cd</span> my-project/
</pre></div>
</div>
<p>Inside the <code class="docutils literal notranslate"><span class="pre">libx</span></code> project, the package definition and script-based files will
be created. First, build the package definition <code class="docutils literal notranslate"><span class="pre">my-project/libx/libx</span></code> with
the following content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">LIBX_VERSION</span><span class="o">=</span><span class="s1">&#39;1.0.0&#39;</span>
</pre></div>
</div>
<p>Next, create a build script for the <code class="docutils literal notranslate"><span class="pre">libx</span></code> project
<code class="docutils literal notranslate"><span class="pre">my-project/libx/libx-build</span></code> with the following content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;invoked libx package build stage&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a very simple script-based package (all package options explained later
in this document). Repeat the same steps for the <code class="docutils literal notranslate"><span class="pre">liby</span></code> package with the file
<code class="docutils literal notranslate"><span class="pre">my-project/liby/liby</span></code> containing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">LIBY_DEPENDENCIES</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;libx&#39;</span><span class="p">]</span>
<span class="n">LIBY_VERSION</span><span class="o">=</span><span class="s1">&#39;2.1.0&#39;</span>
</pre></div>
</div>
<p>And <code class="docutils literal notranslate"><span class="pre">my-project/liby/libx-build</span></code> containing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;invoked liby package build stage&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>One difference with this package is the definition of <code class="docutils literal notranslate"><span class="pre">LIBY_DEPENDENCIES</span></code>,
which tells releng-tool to ensure that <code class="docutils literal notranslate"><span class="pre">libx</span></code> package is processed before
<code class="docutils literal notranslate"><span class="pre">liby</span></code>.</p>
<p>With this minimal set of packages, the project’s releng-tool configuration can
now be created. At the root of the project folder, create a <code class="docutils literal notranslate"><span class="pre">releng</span></code>
configuration file with the following contents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;libx&#39;</span><span class="p">,</span>
    <span class="s1">&#39;liby&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This sample project should be ready for a spin. While in the <code class="docutils literal notranslate"><span class="pre">my-project</span></code>
folder, invoke <code class="docutils literal notranslate"><span class="pre">releng-tool</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool
<span class="go">patching libx...</span>
<span class="go">configuring libx...</span>
<span class="go">building libx...</span>
<span class="go">invoked libx package build stage</span>
<span class="go">installing libx...</span>
<span class="go">patching liby...</span>
<span class="go">configuring liby...</span>
<span class="go">building liby...</span>
<span class="go">invoked liby package build stage</span>
<span class="go">installing liby...</span>
<span class="go">generating license information...</span>
<span class="go">(success) completed (0:00:00)</span>
</pre></div>
</div>
<p>This above output shows that the <code class="docutils literal notranslate"><span class="pre">libx</span></code> package’s stage are invoke followed by
<code class="docutils literal notranslate"><span class="pre">liby</span></code> package’s stages. For the build stage in each package, each respective
package script has been invoked. While this example only prints a message, more
elaborate scripts can be made to handle a package’s source to build.</p>
<p>To clean the project, a <code class="docutils literal notranslate"><span class="pre">releng-tool</span> <span class="pre">clean</span></code> request can be invoked:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool clean
</pre></div>
</div>
<p>Now the project is in a state again to perform a fresh build. This concludes the
initial getting started example. Feel free to remove the example project and
prepare for steps to make a real releng-tool project.</p>
</div>
<div class="section" id="actually-getting-started">
<h2>actually getting started<a class="headerlink" href="#actually-getting-started" title="Permalink to this headline"></a></h2>
<p>Start building a new releng-tool project by creating the following root and
package folders for a project, and venture into the root folder:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> mkdir -p &lt;my-project&gt;/package
<span class="gp">$</span> <span class="nb">cd</span> &lt;my-project&gt;/
</pre></div>
</div>
<p>Inside the root folder, create a releng-tool configuration file <code class="docutils literal notranslate"><span class="pre">releng</span></code> with
the following skeleton content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This configuration defines a releng-tool project with no packages. Start to
change this by adding a package or more for each a module to be built in the
release engineering process. For example, packages can be individual static
libraries, simple asset fetching (e.g. image/document downloading) and more.</p>
<p>For each package, create a new folder inside <code class="docutils literal notranslate"><span class="pre">&lt;my-project&gt;/package</span></code> to
represent the package.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> mkdir &lt;my-project&gt;/package/&lt;my-package&gt;
</pre></div>
</div>
<p>Inside each newly created package, create a package definition file. This
(Python-based) file will be named with the same name as the package folder (i.e.
<code class="docutils literal notranslate"><span class="pre">&lt;my-project&gt;/package/&lt;my-package&gt;/&lt;my-package&gt;</span></code>). An initial skeleton
structure for the definition file is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">MY_PACKAGE_DEPENDENCIES</span><span class="o">=</span><span class="p">[]</span>
<span class="n">MY_PACKAGE_LICENSE</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&lt;license name&gt;&#39;</span><span class="p">]</span>
<span class="n">MY_PACKAGE_LICENSE_FILES</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&lt;license file&gt;&#39;</span><span class="p">]</span>
<span class="n">MY_PACKAGE_SITE</span><span class="o">=</span><span class="s1">&#39;&lt;location for sources&gt;&#39;</span>
<span class="n">MY_PACKAGE_TYPE</span><span class="o">=</span><span class="s1">&#39;&lt;package-type&gt;&#39;</span>
<span class="n">MY_PACKAGE_VERSION</span><span class="o">=</span><span class="s1">&#39;&lt;package-version&gt;&#39;</span>
</pre></div>
</div>
<p>Initial changes to note:</p>
<ul class="simple">
<li><p>For a package, any support package variable requires the package name as a
prefix. The prefix should be a underscore-separated all-uppercase string
value. In the above example, if the package name was <code class="docutils literal notranslate"><span class="pre">my-package</span></code>, the
prefix will be <code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_</span></code>.</p></li>
<li><p>One of the most important options is the version option
(<code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_VERSION</span></code>). This value is used to help manage downloaded asset
names, build output directories and sometimes even revision values for
source-fetching. An example of a good version value is ‘1.0’; however, the
value can vary depending on the package being defined.</p></li>
<li><p>The site value (<code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_SITE</span></code>) is used to identify where source/assets
can be fetched from. A site can be a Git repository, a URL, SCP location, a
site value supported by a custom fetch extension or more.</p></li>
<li><p>A helpful configuration option is the dependency list
(<code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_DEPENDENCIES</span></code>). If a package depends on another package being
built, the name of the package should be listed in this option. This ensures
that releng-tool will invoke package stages in the appropriate order.</p></li>
<li><p>While not required, it is recommended to provide license tracking for packages
when possible. <code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_LICENSE</span></code> and <code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_LICENSE_FILES</span></code> are
list values to define the list of licenses applicable to this package and the
location of the respective license files found in the sources. A developer can
exclude these options if desired. If a developer does provide these options,
the end of the build process will compile a document of used licenses for the
project.</p></li>
<li><p>The type of package (<code class="docutils literal notranslate"><span class="pre">MY_PACKAGE_TYPE</span></code>) can be used to take advantage of
various package types supported by releng-tool. By default, packages are
script-based, where Python scripts inside the packages are invoked during each
stage (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;my-project&gt;/package/build</span></code> would be invoked during the build
phase). releng-tool also supports other package types such as autotools, CMake
and more to limit the need to define custom scripts for common build steps.
Developers can also use package types defined by included extensions (if any).</p></li>
</ul>
<p>A detailed list of options can be found in <a class="reference internal" href="#common-package-configurations">common package configurations</a> and
<a class="reference internal" href="#advanced-package-configurations">advanced package configurations</a>.</p>
<p>Once all packages have been prepared with desired package definitions options,
the root configuration script (<code class="docutils literal notranslate"><span class="pre">releng</span></code>) should be updated to indicate which
packages should be built. All packages can be defined in the <code class="docutils literal notranslate"><span class="pre">packages</span></code> list
if desired. For example, if a project has packages <code class="docutils literal notranslate"><span class="pre">liba</span></code>, <code class="docutils literal notranslate"><span class="pre">libb</span></code> and
<code class="docutils literal notranslate"><span class="pre">programc</span></code>, the following package list can be defined:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;liba&#39;</span><span class="p">,</span>
    <span class="s1">&#39;libb&#39;</span><span class="p">,</span>
    <span class="s1">&#39;programc&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note that a developer does not need to explicitly add each component if
dependencies are configured. Considering the same packages listed above, if
<code class="docutils literal notranslate"><span class="pre">programc</span></code> depends on both <code class="docutils literal notranslate"><span class="pre">liba</span></code> and <code class="docutils literal notranslate"><span class="pre">libb</span></code> packages, only <code class="docutils literal notranslate"><span class="pre">programc</span></code>
needs to be explicitly listed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;programc&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>When processing, both <code class="docutils literal notranslate"><span class="pre">liba</span></code> and <code class="docutils literal notranslate"><span class="pre">libb</span></code> packages will be implicitly loaded
and processed like any other package.</p>
<p>Once all the project’s packages are ready, a developer can try their luck by
attempting to perform the release engineering process:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool
</pre></div>
</div>
<p>A developer may not have luck on the first go. Tweaks may be needed on the
package definitions, custom scripts (if used) and issues found in sources. A
developer may invoke <code class="docutils literal notranslate"><span class="pre">releng-tool</span></code> multiple times to attempt to continue the
build process for a project. A developer may wish to use the <code class="docutils literal notranslate"><span class="pre">clean</span></code> option to
remove an existing extracted sources/partially built sources:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool clean
</pre></div>
</div>
<p>Or start from a completely fresh state using <code class="docutils literal notranslate"><span class="pre">mrproper</span></code> to remove any built
images and file mode flags:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool mrproper
</pre></div>
</div>
<p>There may also be times if a single project needs to be cleaned:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool my-package-clean
</pre></div>
</div>
<p>Consult the <a class="reference internal" href="user-guide.html"><span class="doc">user’s guide</span></a> for more action information.</p>
<p>Eventually the project should be in a good state that each package is being
built as expected. Now a user can decide on what to do with the resulting files.
After the invoke of a releng-tool process, it is typical for final binaries,
public includes, etc. to be found inside the <code class="docutils literal notranslate"><span class="pre">&lt;root&gt;/output/target</span></code> directory.
If a developer only desires to manually take the assets from this folder and
distribute/store them, no additional steps are required. However, it may be
common that a developer wants to package some assets (whether it be a
tar/zip/etc. container, pkg/rpm/etc. package or more). A developer could deal
with such a capability outside the releng-tool process; but if a developer
wishes to hook the end of the process, a post-processing script can be used.</p>
<p>A developer may create a post-processing file <code class="docutils literal notranslate"><span class="pre">releng-post-build</span></code> in the root
directory. On the completion of processing each package, the post-processing
script will be invoked. It is important to note that the post-processing script
may be invoked multiple times if a user attempts to rebuild the project. For
example, if the file <code class="docutils literal notranslate"><span class="pre">releng-post-build</span></code> has the following contents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;project target directory: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">TARGET_DIR</span><span class="p">))</span>
</pre></div>
</div>
<p>The target directory will be output to standard out at the end of the build. A
developer may wish to define their own Python script to decide on how to package
the contents found in <code class="docutils literal notranslate"><span class="pre">TARGET_DIR</span></code> (see also <a class="reference internal" href="#script-helpers">script helpers</a> for helper
variables/functions).</p>
</div>
<div class="section" id="releng-configuration">
<h2>releng configuration<a class="headerlink" href="#releng-configuration" title="Permalink to this headline"></a></h2>
<p>A releng-tool project defines its configuration options inside the a <code class="docutils literal notranslate"><span class="pre">releng</span></code>
file at the root of a project. The primary configuration option for a developer
to define is <code class="docutils literal notranslate"><span class="pre">packages</span></code>, which is used to hold a list of packages to be
processed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;package-a&#39;</span><span class="p">,</span>
    <span class="s1">&#39;package-b&#39;</span><span class="p">,</span>
    <span class="s1">&#39;package-c&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>A series of additional configuration options are available to be defined inside
the project’s configuration. A list of common configuration options are as
follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p id="conf-default-intern"><code class="docutils literal notranslate"><span class="pre">default_internal</span></code></p>
</td>
<td><p>A flag to indicate that projects are implicitly
loaded as internal projects. By default, packages
not explicitly configured as internal or external
are assumed to be external packages.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">default_internal</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#internal-and-external-packages">internal and external packages</a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">extensions</span></code></p></td>
<td><p>A list of extensions to load before processing a
releng-tool project. If an extension cannot be
loaded, the release engineering process will fail
with detailed information.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ext-a&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ext-b&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#loading-extensions">loading extensions</a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">external_packages</span></code></p></td>
<td><p>A list of external package locations. By default,
packages for a project will be searched for in
root directory’s package folder
(<code class="docutils literal notranslate"><span class="pre">&lt;root&gt;/package</span></code>). In some build environments,
some packages may be required or may be preferred
to be located in another location/repository. To
allow packages to be loaded from another package
container directory, one or more package
locations can be provided. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">external_packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_EXTERNAL_PKG_DIR&#39;</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p id="conf-license-header"><code class="docutils literal notranslate"><span class="pre">license_header</span></code></p>
</td>
<td><p>As the releng-tool build process is finalized,
a license document can be generated containing
each package’s license information. If a
developer wishes to add a custom header to the
generated document, a header can be defined by
project’s configuration. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">license_header</span> <span class="o">=</span> <span class="s1">&#39;my leading content&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#licenses">licenses</a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">packages</span></code></p></td>
<td><p>A list of packages to process. Packages listed
will be processed by releng-tool till their
completion. Package dependencies not explicitly
listed will be automatically loaded and processed
as well.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;package-a&#39;</span><span class="p">,</span>
    <span class="s1">&#39;package-b&#39;</span><span class="p">,</span>
    <span class="s1">&#39;package-c&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prerequisites</span></code></p></td>
<td><p>A list of host tools to check for before running
a releng-tool project. Allows a developer to
identify tools to check and fail-fast if missing,
instead of waiting for a stage which requires a
specific tool and failing later during a
building, packaging, etc. phase.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prerequisites</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;tool-a&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tool-b&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tool-c&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p id="conf-sysroot-prefix"><code class="docutils literal notranslate"><span class="pre">sysroot_prefix</span></code></p>
</td>
<td><p>Define a custom sysroot prefix to provide to
packages during their configuration, build and
installation stages. By default, the sysroot
prefix is set to <code class="docutils literal notranslate"><span class="pre">/usr</span></code> or <code class="docutils literal notranslate"><span class="pre">\usr</span></code> (based on
the system’s default character to separate
pathname components).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sysroot_prefix</span> <span class="o">=</span> <span class="s1">&#39;/usr&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#libfoo-prefix"><code class="docutils literal notranslate"><span class="pre">LIBFOO_PREFIX</span></code></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url_mirror</span></code></p></td>
<td><p>Specifies a mirror base site to be used for URL
fetch requests. If this option is set, any URL
fetch requests will first be tried on the
configured mirror before attempting to acquired
from the defined site in a package definition.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">url_mirror</span> <span class="o">=</span> <span class="s1">&#39;ftp://mirror.example.org/data/&#39;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A list of more advanced configuration options are as follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cache_ext</span></code></p></td>
<td><p>A transform for cache extension interpreting.
This is an advanced configuration and is not
recommended for use except for special use
cases outlined below.</p>
<p>When releng-tool fetches assets from remote
sites, the site value can used to determine the
resulting filename of a cached asset. For
example, downloading an asset from
<code class="docutils literal notranslate"><span class="pre">https://example.org/my-file.tgz</span></code>, the
locally downloaded file will result in a
<code class="docutils literal notranslate"><span class="pre">.tgz</span></code> extension; however, not all defined
sites will result in an easily interpreted
cache extension. While releng-tool will attempt
its best to determine an appropriate extension
value to use, some use cases may not be able to
be handled. To deal with these cases, a
developer can define a transform method to help
translate a site value into a known cache
extension value.</p>
<p>Consider the following example: a host is used
to acquire assets from a content server. The
URI to download an asset uses a unique request
format
<code class="docutils literal notranslate"><span class="pre">https://static.example.org/fetch/25134</span></code>.
releng-tool may not be able to find the
extension for the fetched asset, but if a
developer knows the expected archive types for
these calls, a custom transform can be defined.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_translator</span><span class="p">(</span><span class="n">site</span><span class="p">):</span>
    <span class="k">if</span> <span class="s1">&#39;static.example.org&#39;</span> <span class="ow">in</span> <span class="n">site</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;tgz&#39;</span>
    <span class="k">return</span> <span class="bp">None</span>

<span class="n">cache_ext</span> <span class="o">=</span> <span class="n">my_translator</span>
</pre></div>
</div>
<p>The above transform indicates that all packages
using the <code class="docutils literal notranslate"><span class="pre">static.example.org</span></code> site will be
<code class="docutils literal notranslate"><span class="pre">tgz</span></code> archives.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">override_extract_tools</span></code></p></td>
<td><p>A dictionary to be provided to map an extension
type to an external tool to indicate which tool
should be used for extraction. For example,
when a <code class="docutils literal notranslate"><span class="pre">.zip</span></code> archive is being processed for
extraction, releng-tool will internally extract
the archive; however, a user may wish to
override this tool with their own extraction
utility. Consider the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">override_extract_tools</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;zip&#39;</span><span class="p">:</span> <span class="s1">&#39;/opt/my-custom-unzip&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that the use of an override option should
only be used in special cases (see also
<a class="reference internal" href="user-guide.html#conf-overrides"><span class="std std-ref">configuration overrides</span></a>).</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">override_revisions</span></code></p></td>
<td><p>Allows a dictionary to be provided to map a
package name to a new revision value. Consider
the following example: a project defines
<code class="docutils literal notranslate"><span class="pre">module-a</span></code> and <code class="docutils literal notranslate"><span class="pre">module-b</span></code> packages with
package <code class="docutils literal notranslate"><span class="pre">module-b</span></code> depending on package
<code class="docutils literal notranslate"><span class="pre">module-a</span></code>. A developer may be attempting to
tweak package <code class="docutils literal notranslate"><span class="pre">module-b</span></code> on the fly to test a
new capabilities against the current stable
version of <code class="docutils literal notranslate"><span class="pre">module-a</span></code>; however, the developer
does not want to explicitly change the revision
inside package <code class="docutils literal notranslate"><span class="pre">module-b</span></code>’s definition. To
avoid this, an override can be used instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="n">override_revisions</span><span class="o">=</span><span class="p">{</span>
     <span class="s1">&#39;module-b&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;test-branch&gt;&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above example shows that package
<code class="docutils literal notranslate"><span class="pre">module-b</span></code> will fetch using a test branch
instead of what is defined in the actual
package definition.</p>
<p>Note that the use of an override option should
only be used in special cases (see also
<a class="reference internal" href="user-guide.html#conf-overrides"><span class="std std-ref">configuration overrides</span></a>).</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">override_sites</span></code></p></td>
<td><p>A dictionary to be provided to map a package
name to a new site value. There may be times
where a host may not have access to a specific
package site. To have a host to use a mirror
location without having to adjust the package
definition, the site override option can be
used. For example, consider a package pulls
from site <code class="docutils literal notranslate"><span class="pre">git&#64;example.com:myproject.git</span></code>;
however, the host <code class="docutils literal notranslate"><span class="pre">example.com</span></code> cannot be
access from the host machine. If a mirror
location has been setup at
<code class="docutils literal notranslate"><span class="pre">git&#64;example.org:myproject.git</span></code>, the
following override can be used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">override_sites</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;&lt;pkg&gt;&#39;</span><span class="p">:</span> <span class="s1">&#39;git@example.org:mywork.git&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that the use of an override option should
only be used in special cases (see also
<a class="reference internal" href="user-guide.html#conf-overrides"><span class="std std-ref">configuration overrides</span></a>).</p>
</td>
</tr>
<tr class="row-odd"><td><p id="conf-quirks"><code class="docutils literal notranslate"><span class="pre">quirks</span></code></p>
</td>
<td><p>A list of configuration quirks to apply to deal
with rare corner case scenarios which can
prevent releng-tool operating on a host system.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">quirks</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;releng.&lt;special-quirk-id&gt;&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>For a list of available quirks, please consult
<a class="reference internal" href="#quirks">quirks</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="environment-variables">
<h2>environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline"></a></h2>
<p>When packages and the post-processing event are processed, the following
environment variables will be made available:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BUILD_DIR</span></code></p></td>
<td><p>The build directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CACHE_DIR</span></code></p></td>
<td><p>The cache directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DL_DIR</span></code></p></td>
<td><p>The download directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HOST_DIR</span></code></p></td>
<td><p>The host directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IMAGES_DIR</span></code></p></td>
<td><p>The images directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LICENSE_DIR</span></code></p></td>
<td><p>The licenses directory.</p>
<p>See also <a class="reference internal" href="#licenses">licenses</a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p id="conf-njobs"><code class="docutils literal notranslate"><span class="pre">NJOBS</span></code></p>
</td>
<td><p>Number of calculated jobs to allow at a given
time. Unless explicitly set by a system builder
on the command line, the calculated number of
jobs should be equal to the number of physical
cores on the host. When building a specific
package and the package overrides the number of
jobs to use, the package-defined count will be
used instead. This configuration will always be a
value of at least one (1).</p></td>
</tr>
<tr class="row-even"><td><p id="conf-njobsconf"><code class="docutils literal notranslate"><span class="pre">NJOBSCONF</span></code></p>
</td>
<td><p>Number of jobs to allow at a given time. Unlike
<a class="reference internal" href="#conf-njobs"><code class="docutils literal notranslate"><span class="pre">NJOBS</span></code></a>, <code class="docutils literal notranslate"><span class="pre">NJOBSCONF</span></code> provides the
requested configured number of jobs to use. The
value may be set to zero (0) to indicate an
automatic detection of jobs to use. This can be
useful for tools which have their own automatic
job count implementation and do not want to rely
on the value defined by <a class="reference internal" href="#conf-njobs"><code class="docutils literal notranslate"><span class="pre">NJOBS</span></code></a>. When
building a specific package and the package
overrides the number of jobs to use, the
package-defined count will be used instead.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">OUTPUT_DIR</span></code></p></td>
<td><p>The output directory.</p></td>
</tr>
<tr class="row-even"><td><p id="conf-pkg-build-dir"><code class="docutils literal notranslate"><span class="pre">PKG_BUILD_DIR</span></code></p>
</td>
<td><p>The directory for a specific package’s buildable
content.</p>
<p>See also <a class="reference internal" href="#conf-pkg-build-odir"><code class="docutils literal notranslate"><span class="pre">PKG_BUILD_OUTPUT_DIR</span></code></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p id="conf-pkg-build-odir"><code class="docutils literal notranslate"><span class="pre">PKG_BUILD_OUTPUT_DIR</span></code></p>
</td>
<td><p>The directory for where a package’s build output
will be stored.</p>
<p>See also <a class="reference internal" href="#conf-pkg-build-dir"><code class="docutils literal notranslate"><span class="pre">PKG_BUILD_DIR</span></code></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_CACHE_DIR</span></code></p></td>
<td><p>The location of the cache directory for a
package. If a package defines a fetch from a
repository which can be locally cached, this
cache directory represents the location where the
local cache of content will be held. For example,
if a provide defines a Git-based site, a local
cache of the Git repository will be stored in
this location. Typically, packages should not
need to operate on the cache directory except for
advanced cases.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_CACHE_FILE</span></code></p></td>
<td><p>The location of the cache file for a package. If
a package defines a fetch of an archive from a
remote source, after the fetch stage is
completed, the archive can be found in this
location. For example, if a package defines a
site <code class="docutils literal notranslate"><span class="pre">https://www.example.com/test.tgz</span></code>, the
resulting catch file may be
<code class="docutils literal notranslate"><span class="pre">&lt;root&gt;/output/dl/test-1.0.tgz</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_DEFDIR</span></code></p></td>
<td><p>The package’s definition directory. For example,
for a package <code class="docutils literal notranslate"><span class="pre">test</span></code>. the definition directory
would be <code class="docutils literal notranslate"><span class="pre">&lt;root&gt;/package/test</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_INTERNAL</span></code></p></td>
<td><p>Whether or not the package is considered
“internal”. If internal, the environment variable
will be set to a value of one (i.e.
<code class="docutils literal notranslate"><span class="pre">PKG_INTERNAL=1</span></code>).</p>
<p>See also <a class="reference internal" href="#internal-and-external-packages">internal and external packages</a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_NAME</span></code></p></td>
<td><p>The name of the package.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_REVISION</span></code></p></td>
<td><p>The site revision of the package.</p>
<p>See also <a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_SITE</span></code></p></td>
<td><p>The site of the package.</p>
<p>See also <a class="reference internal" href="#libfoo-site"><code class="docutils literal notranslate"><span class="pre">LIBFOO_SITE</span></code></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PKG_VERSION</span></code></p></td>
<td><p>The version of the package.</p>
<p>See also <a class="reference internal" href="#libfoo-version"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VERSION</span></code></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PREFIX</span></code></p></td>
<td><p>The sysroot prefix for the package.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_CLEAN</span></code></p></td>
<td><p>Flag set if performing a clean request.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_DEBUG</span></code></p></td>
<td><p>Flag set if debug-related information should be
shown.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_DEVMODE</span></code></p></td>
<td><p>Flag set if in <a class="reference internal" href="user-guide.html#development-mode"><span class="std std-ref">development mode</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_DISTCLEAN</span></code></p></td>
<td><p>Flag set if performing an extreme pristine clean
request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_LOCALSRCS</span></code></p></td>
<td><p>Flag set if in <a class="reference internal" href="user-guide.html#local-sources-mode"><span class="std std-ref">local-sources mode</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_MRPROPER</span></code></p></td>
<td><p>Flag set if performing a pristine clean request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_REBUILD</span></code></p></td>
<td><p>Flag set if performing a re-build request.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_RECONFIGURE</span></code></p></td>
<td><p>Flag set if performing a re-configuration
request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_REINSTALL</span></code></p></td>
<td><p>Flag set if performing a re-install request.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_VERBOSE</span></code></p></td>
<td><p>Flag set if verbose-related information should be
shown.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RELENG_VERSION</span></code></p></td>
<td><p>The version of releng-tool.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ROOT_DIR</span></code></p></td>
<td><p>The root directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STAGING_DIR</span></code></p></td>
<td><p>The staging area directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SYMBOLS_DIR</span></code></p></td>
<td><p>The symbols area directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TARGET_DIR</span></code></p></td>
<td><p>The target area directory.</p></td>
</tr>
</tbody>
</table>
<p>Package-defined environment variables are also available in the rare chance
that package content needs to be mangled (e.g. including a dependent module
which does not properly support a sysroot staged environment). The following
package-defined environment variables are available for use (where <code class="docutils literal notranslate"><span class="pre">&lt;PKG&gt;</span></code>
translates to a releng-tool’s determined package key):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;PKG&gt;_BUILD_DIR</span></code></p></td>
<td><p>The directory for a defined package’s
buildable content.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;PKG&gt;_BUILD_OUTPUT_DIR</span></code></p></td>
<td><p>The directory for where a defined package’s
build output will be stored.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;PKG&gt;_NAME</span></code></p></td>
<td><p>The name of the package.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;PKG&gt;_REVISION</span></code></p></td>
<td><p>The revision of a defined package.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;PKG&gt;_VERSION</span></code></p></td>
<td><p>The version of a defined package.</p></td>
</tr>
</tbody>
</table>
<p>Note that is it not recommended to define environment variables for the
releng-tool process to use outside the project definition except for special
cases (such as authentication tokens, etc.). Attempting to configure, for
example, compiler flags outside the project definition circumvents configuration
control a releng-tool project aims to maintain.</p>
</div>
<div class="section" id="packages">
<h2>packages<a class="headerlink" href="#packages" title="Permalink to this headline"></a></h2>
<p>Packages are defined inside the <code class="docutils literal notranslate"><span class="pre">package/</span></code> directory. There is no explicit
limit on the total number of packages a project can have. Packages can consist
of libraries, programs or even basic assets. Package names are recommended to be
lower-case with dash-separated (<code class="docutils literal notranslate"><span class="pre">-</span></code>) separators (if needed). For example,
<code class="docutils literal notranslate"><span class="pre">package-a</span></code> is recommended over <code class="docutils literal notranslate"><span class="pre">PackageA</span></code> or <code class="docutils literal notranslate"><span class="pre">package_a</span></code>; however, the
choice is up to the developer making the releng-tool project.</p>
<p>When making a package, a container folder for the package as well as a package
definition file needs to be made. For example, if the package is <code class="docutils literal notranslate"><span class="pre">package-a</span></code>,
the file <code class="docutils literal notranslate"><span class="pre">package/package-a/package-a</span></code> should exist. Package definition files
are Python-based, thus the following leading header is recommended:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
</pre></div>
</div>
<p>Inside the definition file, a series of configuration options can be set to tell
releng-tool how to work with the defined package. Each option is prefixed with
a variable-safe variant of the package name. The prefix value will be an
uppercase string based on the package name with special characters converted to
underscores. For example, <code class="docutils literal notranslate"><span class="pre">package-a</span></code> will have a prefix <code class="docutils literal notranslate"><span class="pre">PACKAGE_A_</span></code>. For a
package to take advantage of a configuration option, the package definition will
add a variable entry with the package’s prefix followed by the
supported option name. Considering the same package with the name <code class="docutils literal notranslate"><span class="pre">package-a</span></code>
(and prefix <code class="docutils literal notranslate"><span class="pre">PACKAGE_A_</span></code>), to use the <a class="reference internal" href="#libfoo-version"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VERSION</span></code></a> configuration option,
the following can be defined (<code class="docutils literal notranslate"><span class="pre">PACKAGE_A_VERSION</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">PACKAGE_A_VERSION</span><span class="o">=</span><span class="s1">&#39;1.0.0&#39;</span>
</pre></div>
</div>
<p>More details on available configuration options are as follows.</p>
<div class="section" id="common-package-configurations">
<h3>common package configurations<a class="headerlink" href="#common-package-configurations" title="Permalink to this headline"></a></h3>
<p>The following outlines common configuration options available for packages.</p>
<div class="section" id="libfoo-dependencies">
<h4>LIBFOO_DEPENDENCIES<a class="headerlink" href="#libfoo-dependencies" title="Permalink to this headline"></a></h4>
<p>List of package dependencies a given project has. If a project depends on
another package, the package name should be listed in this option. This ensures
releng-tool will process packages in the proper order. The following shows an
example package <code class="docutils literal notranslate"><span class="pre">libc</span></code> being dependent on <code class="docutils literal notranslate"><span class="pre">liba</span></code> and <code class="docutils literal notranslate"><span class="pre">libb</span></code> being
processed first:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBC_DEPENDENCIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;liba&#39;</span><span class="p">,</span> <span class="s1">&#39;libb&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-install-type">
<h4>LIBFOO_INSTALL_TYPE<a class="headerlink" href="#libfoo-install-type" title="Permalink to this headline"></a></h4>
<p>Defines the installation type of this package. A package may be designed to be
built and installed for just the target area, the stage area, both or maybe in
the host directory. The following options are available for the installation
type:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>The host directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">images</span></code></p></td>
<td><p>The images directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">staging</span></code></p></td>
<td><p>The staging area.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">staging_and_target</span></code></p></td>
<td><p>Both the staging an target area.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p>The target area.</p></td>
</tr>
</tbody>
</table>
<p>The default installation type is <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_TYPE</span> <span class="o">=</span> <span class="s1">&#39;target&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-license">
<h4>LIBFOO_LICENSE<a class="headerlink" href="#libfoo-license" title="Permalink to this headline"></a></h4>
<p>A string or list of strings outlining the license information for a package.
Outlining the license of a package is always recommended (but not required).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_LICENSE</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GPLv2&#39;</span><span class="p">,</span> <span class="s1">&#39;MIT&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_LICENSE</span> <span class="o">=</span> <span class="s1">&#39;Proprietary&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#libfoo-license-files"><code class="docutils literal notranslate"><span class="pre">LIBFOO_LICENSE_FILES</span></code></a>.</p>
</div>
<div class="section" id="libfoo-license-files">
<h4>LIBFOO_LICENSE_FILES<a class="headerlink" href="#libfoo-license-files" title="Permalink to this headline"></a></h4>
<p>A string or list of strings identifying the license files found inside the
package sources which match up to the defined <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> entries
(respectively). Listing the license(s) of a package is always recommended (but
not required).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_LICENSE_FILES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;LICENSE.GPLv2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LICENSE.MIT&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_LICENSE_FILES</span> <span class="o">=</span> <span class="s1">&#39;LICENSE&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#libfoo-license"><code class="docutils literal notranslate"><span class="pre">LIBFOO_LICENSE</span></code></a>.</p>
</div>
<div class="section" id="libfoo-site">
<h4>LIBFOO_SITE<a class="headerlink" href="#libfoo-site" title="Permalink to this headline"></a></h4>
<p>The site where package sources/assets can be found. The site can be a URL of an
archive, or describe a source control URL such as Git or SVN. The following
outline a series of supported site definitions:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>prefix/postfix</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bazaar</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bzr+</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>CVS</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cvs+</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Git</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git+</span></code> or <code class="docutils literal notranslate"><span class="pre">.git</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Mercurial</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hg+</span></code></p></td>
</tr>
<tr class="row-even"><td><p>SCP</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">scp+</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>SVN</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">svn+</span></code></p></td>
</tr>
<tr class="row-even"><td><p>URL</p></td>
<td><p><cite>(wildcard)</cite></p></td>
</tr>
</tbody>
</table>
<p>Examples include:</p>
<pre class="literal-block">LIBFOO_SITE = 'https://example.com/libfoo.git'
LIBFOO_SITE = 'cvs+:pserver:anonymous&#64;cvs.example.com:/var/lib/cvsroot mymodule'
LIBFOO_SITE = 'svn+https://svn.example.com/repos/libfoo/c/branches/libfoo-1.2'
LIBFOO_SITE = 'https://www.example.com/files/libfoo.tar.gz'</pre>
<p>A developer can also use <a class="reference internal" href="#libfoo-vcs-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VCS_TYPE</span></code></a> to explicitly define the version
control system type without the need for a prefix/postfix entry.</p>
<p>For more information on each type’s formatting, consult
<a class="reference internal" href="#site-definitions"><span class="std std-ref">site definitions</span></a>.</p>
<p>Using a specific type will create a dependency for a project that the respective
host tool is installed on the host system. For example, if a Git site is set,
the host system will need to have <code class="docutils literal notranslate"><span class="pre">git</span></code> installed on the system.</p>
<p>If no site is defined for a package, it will be considered a virtual package
(i.e. has no content). If applicable, loaded extensions may provide support for
custom site protocols.</p>
<p>Specifying a site value of <code class="docutils literal notranslate"><span class="pre">local</span></code> will automatically configure a VCS-type of
<code class="docutils literal notranslate"><span class="pre">local</span></code> (see <a class="reference internal" href="#libfoo-vcs-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VCS_TYPE</span></code></a> for more information).</p>
<p>See also <a class="reference internal" href="#libfoo-vcs-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VCS_TYPE</span></code></a>.</p>
</div>
<div class="section" id="libfoo-type">
<h4>LIBFOO_TYPE<a class="headerlink" href="#libfoo-type" title="Permalink to this headline"></a></h4>
<p>The package type. The default package type is a (Python) script-based package;
however, releng-tool also provides a series of helper package types for common
frameworks. The following outline a series of supported site definitions:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Autotools</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">autotools</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>CMake</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cmake</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Python</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">python</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Script</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">script</span></code></p></td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_TYPE</span> <span class="o">=</span> <span class="s1">&#39;script&#39;</span>
</pre></div>
</div>
<p>If no type is defined for a package, it will be considered a script-based
package. If applicable, loaded extensions may provide support for custom site
protocols.</p>
<p>Using a specific type will create a dependency for a project that the respective
host tool is installed on the host system. For example, if a CMake type is set,
the host system will need to have <code class="docutils literal notranslate"><span class="pre">cmake</span></code> installed on the system.</p>
</div>
<div class="section" id="libfoo-version">
<h4>LIBFOO_VERSION<a class="headerlink" href="#libfoo-version" title="Permalink to this headline"></a></h4>
<p>The version of the package. Typically the version value should be formatted in a
semantic versioning style; however, it is up to the developer to decide the best
version value to use for a package. It is important to note that the version
value is used to determine build output folder names, cache files and more.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_VERSION</span> <span class="o">=</span> <span class="s1">&#39;1.0.0&#39;</span>
</pre></div>
</div>
<p>For some VCS types, the version value will be used to acquire a specific
revision of sources. If for some case the desired version value cannot be
gracefully defined (e.g. <code class="docutils literal notranslate"><span class="pre">libfoo-v1.0</span></code> will produce output directories such as
<code class="docutils literal notranslate"><span class="pre">libfoo-libfoo-v1.0</span></code>), <a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a> can be used.</p>
<p>See also <a class="reference internal" href="#libfoo-devmode-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_DEVMODE_REVISION</span></code></a> and <a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a>.</p>
</div>
</div>
<div class="section" id="advanced-package-configurations">
<h3>advanced package configurations<a class="headerlink" href="#advanced-package-configurations" title="Permalink to this headline"></a></h3>
<p>The following outlines more advanced configuration options available for
packages.</p>
<div class="section" id="libfoo-build-subdir">
<h4>LIBFOO_BUILD_SUBDIR<a class="headerlink" href="#libfoo-build-subdir" title="Permalink to this headline"></a></h4>
<p>Sub-directory where a package’s extracted sources holds its buildable content.
Sources for a package may be nested inside one or more directories. A package
can specify the sub-directory where the configuration, build and installation
processes are invoked from.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_SUBDIR</span> <span class="o">=</span> <span class="s1">&#39;subdir&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-devmode-ignore-cache">
<h4>LIBFOO_DEVMODE_IGNORE_CACHE<a class="headerlink" href="#libfoo-devmode-ignore-cache" title="Permalink to this headline"></a></h4>
<p>Flag value to explicitly indicate that a package should ignore any generated
cache file when operating in development mode. In most cases, users want to take
advantage of cached sources to prevent having to re-fetch the same content again
between builds. However, some packages may be configured in a way where their
request for a package’s contents varies from a fresh stage. For example, when
pulling from a branch, releng-tool will not attempt to re-fetch from a site
since a cached content has already been fetched. If a developer configures a
package to use a revision value with dynamic content, they may wish to use this
option to have a user always force fetching new content from a clean state.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_DEVMODE_IGNORE_CACHE</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>By default, this option is not defined and results can vary based off the site
type being fetched. In most cases, fetch operations will treat the default case
of this option as disabled (<code class="docutils literal notranslate"><span class="pre">False</span></code>). DVCS site types may elect to enable this
option by default (<code class="docutils literal notranslate"><span class="pre">True</span></code>) if the target revision is a branch.</p>
</div>
<div class="section" id="libfoo-devmode-revision">
<h4>LIBFOO_DEVMODE_REVISION<a class="headerlink" href="#libfoo-devmode-revision" title="Permalink to this headline"></a></h4>
<p>Specifies a development revision for a package. When a project is being built in
<a class="reference internal" href="user-guide.html#development-mode"><span class="std std-ref">development mode</span></a>, the development revision is used over the configured
<a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a> value. If a development revision is not defined for a
project, a package will still use the configured <a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a> while in
development mode.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_DEVMODE_REVISION</span> <span class="o">=</span> <span class="s1">&#39;feature/alpha&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a> and <a class="reference internal" href="#libfoo-version"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VERSION</span></code></a>.</p>
</div>
<div class="section" id="libfoo-extension">
<h4>LIBFOO_EXTENSION<a class="headerlink" href="#libfoo-extension" title="Permalink to this headline"></a></h4>
<p>Specifies a filename extension for the package. A package may be cached inside
the download directory to be used when the extraction phase is invoked.
releng-tool attempts to determine the most ideal extension for this cache file;
however some cases the detected extension may be incorrect. To deal with this
situation, a developer can explicitly specify the extension value using this
option.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_EXTENSION</span> <span class="o">=</span> <span class="s1">&#39;tgz&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-external">
<h4>LIBFOO_EXTERNAL<a class="headerlink" href="#libfoo-external" title="Permalink to this headline"></a></h4>
<p>Flag value to explicitly indicate that a package is an external package.
External packages will generate warnings if <a class="reference internal" href="#hash-files"><span class="std std-ref">hashes</span></a>, an
<a class="reference internal" href="#ascii-armor"><span class="std std-ref">ASCII-armor</span></a> or <a class="reference internal" href="#licenses">licenses</a> are missing. By default,
packages are considered external unless explicitly configured to be internal.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_EXTERNAL</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#internal-and-external-packages">internal and external packages</a>.</p>
</div>
<div class="section" id="libfoo-extopt">
<h4>LIBFOO_EXTOPT<a class="headerlink" href="#libfoo-extopt" title="Permalink to this headline"></a></h4>
<p>Specifies extension-specific options. Packages wishing to take advantage of
extension-specific capabilities can forward options to extensions by defining a
dictionary of values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_EXTOPT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;option-a&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;option-b&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-extract-type">
<h4>LIBFOO_EXTRACT_TYPE<a class="headerlink" href="#libfoo-extract-type" title="Permalink to this headline"></a></h4>
<p>Specifies a custom extraction type for a package. If a configured extension
supports a custom extraction capability, the registered extraction type can be
explicitly registered in this option.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_EXTRACT_TYPE</span> <span class="o">=</span> <span class="s1">&#39;ext-custom-extract&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-fixed-jobs">
<h4>LIBFOO_FIXED_JOBS<a class="headerlink" href="#libfoo-fixed-jobs" title="Permalink to this headline"></a></h4>
<p>Explicitly configure the total number of jobs a package can use. The primary use
case for this option is to help limit the total number of jobs for a package
that cannot support a large or any parallel build environment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_FIXED_JOBS</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-git-config">
<h4>LIBFOO_GIT_CONFIG<a class="headerlink" href="#libfoo-git-config" title="Permalink to this headline"></a></h4>
<p>Apply additional repository-specific Git configuration settings (<a class="reference external" href="https://git-scm.com/docs/git-config"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span></code></a>)
after a Git repository cache has been initialized. By default, no
repository-specific configurations are introduced (i.e. all Git calls will use
the global configuration set).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_GIT_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;core.example&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-git-depth">
<h4>LIBFOO_GIT_DEPTH<a class="headerlink" href="#libfoo-git-depth" title="Permalink to this headline"></a></h4>
<p>Limit fetching for a Git-based source to the specified number of commits. The
value provided will be used with the <a class="reference external" href="https://git-scm.com/docs/git-fetch#Documentation/git-fetch.txt---depthltdepthgt"><code class="docutils literal notranslate"><span class="pre">--depth</span></code></a> argument. By default, the depth
will be set to a value of <code class="docutils literal notranslate"><span class="pre">1</span></code>. If a developer wishes use fetch all commits
from all refspecs, a developer can specify a value of <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>While the default depth is a value of <code class="docutils literal notranslate"><span class="pre">1</span></code>, an exception is made when the depth
is not explicitly set and the <a class="reference internal" href="#libfoo-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_REVISION</span></code></a> value defined is a hash. For
this case, if the revision is not found with the implicitly-defined shallow
depth of <code class="docutils literal notranslate"><span class="pre">1</span></code>, the entire history of the repository will be fetched.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_GIT_DEPTH</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#libfoo-git-refspecs"><code class="docutils literal notranslate"><span class="pre">LIBFOO_GIT_REFSPECS</span></code></a> and <a class="reference internal" href="#quirks"><span class="std std-ref">configuration quirks</span></a>.</p>
</div>
<div class="section" id="libfoo-git-refspecs">
<h4>LIBFOO_GIT_REFSPECS<a class="headerlink" href="#libfoo-git-refspecs" title="Permalink to this headline"></a></h4>
<p>List of addition refspecs to fetch when using a <code class="docutils literal notranslate"><span class="pre">git</span></code> VCS type. By default, a
Git fetch request will acquire all <code class="docutils literal notranslate"><span class="pre">heads</span></code> and <code class="docutils literal notranslate"><span class="pre">tags</span></code> refspecs. If a
developer wishes use revisions from different refspecs (for example, a pull
request), a developer can specify the additional refspecs to acquire when
fetching.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_GIT_REFSPECS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pull/*&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-git-submodules">
<h4>LIBFOO_GIT_SUBMODULES<a class="headerlink" href="#libfoo-git-submodules" title="Permalink to this headline"></a></h4>
<p>Flag value to indicate whether or not a package’s Git submodules should be
fetched/extracted during a package’s own fetch/extraction stages. By default,
submodules are not fetched. Ideally, any dependencies for a package are
recommended to be defined in their own individual package; however, this may not
be ideal for all environments. When configured, submodules will be cached in the
same fashion as other Git-based packages. Note that submodule caching is
specific to the repository being processed (i.e. they cannot be “shared” between
other packages). If multiple packages have the same dependency defined through a
submodule, it is recommended to create a new package and reference its contents
instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_GIT_SUBMODULES</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-git-verify-revision">
<h4>LIBFOO_GIT_VERIFY_REVISION<a class="headerlink" href="#libfoo-git-verify-revision" title="Permalink to this headline"></a></h4>
<p>Flag value to indicate whether or not the target revision is required to be
signed before it can be used. When this value is set, the configured revision
for a repository will not be extracted unless the GPG signature. This includes
if the public key for the author is not registered in the local system or if the
target revision is not signed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_GIT_VERIFY_REVISION</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-internal">
<h4>LIBFOO_INTERNAL<a class="headerlink" href="#libfoo-internal" title="Permalink to this headline"></a></h4>
<p>Flag value to explicitly indicate that a package is an internal package.
Internal packages will not generate warnings if <a class="reference internal" href="#hash-files"><span class="std std-ref">hashes</span></a>, an
<a class="reference internal" href="#ascii-armor"><span class="std std-ref">ASCII-armor</span></a> or <a class="reference internal" href="#licenses">licenses</a> are missing. When configured in
<a class="reference internal" href="user-guide.html#local-sources-mode"><span class="std std-ref">local-sources mode</span></a>, package sources are searched for in the local
directory opposed to site fetched sources. By default, packages are considered
external unless explicitly configured to be internal.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INTERNAL</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#internal-and-external-packages">internal and external packages</a>.</p>
</div>
<div class="section" id="libfoo-no-extraction">
<h4>LIBFOO_NO_EXTRACTION<a class="headerlink" href="#libfoo-no-extraction" title="Permalink to this headline"></a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If <code class="docutils literal notranslate"><span class="pre">LIBFOO_NO_EXTRACTION</span></code> is configured for a package, the package cannot
define additional <a class="reference internal" href="#hash-files"><span class="std std-ref">hashes</span></a>, configure an
<a class="reference internal" href="#ascii-armor"><span class="std std-ref">ASCII-armor</span></a>, define a list of <code class="docutils literal notranslate"><span class="pre">LIBFOO_LICENSE_FILES</span></code>
to manage or expect to support various actions (such as building; since no
sources are available).</p>
</div>
<p>Flag value to explicitly indicate that a package should not extract the package
contents. This feature is primarily used when using releng-tool to fetch content
for one or more packages (into <code class="docutils literal notranslate"><span class="pre">DL_DIR</span></code>) to be used by another package the
releng-tool project defines.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_NO_EXTRACTION</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>Limitations exist when using the <code class="docutils literal notranslate"><span class="pre">LIBFOO_NO_EXTRACTION</span></code> option. Since
releng-tool will not be used to extract a package’s archive (if any), hash
entries for files found inside the archive cannot be checked against. If any
files other than the archive itself is listed, releng-tool will stop processing
due to a hash check failure. In addition, since releng-tool does not have the
extracted contents of an archive, it is unable to acquire a copy of the
project’s license file. Specifying <code class="docutils literal notranslate"><span class="pre">LIBFOO_LICENSE_FILES</span></code> for projects with
the no-extraction flag enabled will result in a warning. By default, this option
is disabled with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
<div class="section" id="libfoo-prefix">
<h4>LIBFOO_PREFIX<a class="headerlink" href="#libfoo-prefix" title="Permalink to this headline"></a></h4>
<p>Specifies the sysroot prefix value to use for the package. An explicitly
provided prefix value will override the project-defined or default sysroot
prefix value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;/usr&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#conf-sysroot-prefix"><code class="docutils literal notranslate"><span class="pre">sysroot_prefix</span></code></a>.</p>
</div>
<div class="section" id="libfoo-revision">
<h4>LIBFOO_REVISION<a class="headerlink" href="#libfoo-revision" title="Permalink to this headline"></a></h4>
<p>Specifies a revision value for a package. When a package fetches content using
source management tools, the revision value is used to determine which sources
should be acquired (e.g. a tag). If a revision is not defined package, a package
will use the configured <a class="reference internal" href="#libfoo-version"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VERSION</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_REVISION</span> <span class="o">=</span> <span class="s1">&#39;libfoo-v2.1&#39;</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#libfoo-devmode-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_DEVMODE_REVISION</span></code></a> and <a class="reference internal" href="#libfoo-version"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VERSION</span></code></a>.</p>
</div>
<div class="section" id="libfoo-skip-remote-config">
<h4>LIBFOO_SKIP_REMOTE_CONFIG<a class="headerlink" href="#libfoo-skip-remote-config" title="Permalink to this headline"></a></h4>
<p>Flag value to explicitly indicate that a package should not attempt to load any
package configurations which may be defined in the package’s source. A package,
by default, has the ability to load configuration information from a package’s
source. If the package includes a <code class="docutils literal notranslate"><span class="pre">.releng-tool</span></code> file at the root of their
sources, supported configuration options that have not been populated will be
registered into the package before invoking a package’s configuration stage.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SKIP_REMOTE_CONFIG</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#quirks"><span class="std std-ref">configuration quirks</span></a>.</p>
</div>
<div class="section" id="libfoo-skip-remote-scripts">
<h4>LIBFOO_SKIP_REMOTE_SCRIPTS<a class="headerlink" href="#libfoo-skip-remote-scripts" title="Permalink to this headline"></a></h4>
<p>Flag value to explicitly indicate that a package should not attempt to load any
package scripts which may be defined in the package’s source. Typically, a
script-based package will load configuration, build, etc. scripts from its
package definition folder. If a script-based package is missing a stage script
to invoke and finds an associated script in the package’s source, the detected
script will be invoked. For example, if <code class="docutils literal notranslate"><span class="pre">libfoo</span></code> package may attempt to load
a <code class="docutils literal notranslate"><span class="pre">libfoo-configure</span></code> script for a configuration stage. In the event that the
script cannot be found and remote scripting is permitted for a package, the
script (if exists) <code class="docutils literal notranslate"><span class="pre">releng-configure</span></code> will be loaded from the root of the
package’s contents.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SKIP_REMOTE_CONFIG</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#quirks"><span class="std std-ref">configuration quirks</span></a>.</p>
</div>
<div class="section" id="libfoo-strip-count">
<h4>LIBFOO_STRIP_COUNT<a class="headerlink" href="#libfoo-strip-count" title="Permalink to this headline"></a></h4>
<p>Specifies the strip count to use when attempting to extract sources from an
archive. By default, the extraction process will strip a single directory from
an archive (value: 1). If a package’s archive has no container directory, a
strip count of zero can be set; likewise if an archive contains multiple
container directories, a higher strip count can be set.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_STRIP_COUNT</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-vcs-type">
<h4>LIBFOO_VCS_TYPE<a class="headerlink" href="#libfoo-vcs-type" title="Permalink to this headline"></a></h4>
<p>Explicitly sets the version control system type to use when acquiring sources.
releng-tool attempts to automatically determine the VCS type of a package based
off a <a class="reference internal" href="#libfoo-site"><code class="docutils literal notranslate"><span class="pre">LIBFOO_SITE</span></code></a> value. In some scenarios, a site value may be unable to
specify a desired prefix/postfix. A developer can instead explicitly set the VCS
type to be used no matter what the site value is configured as.</p>
<p>Supported types are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span></code> (Bazaar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cvs</span></code> (CVS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span></code> (Git)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hg</span></code>  (Mercurial)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">local</span></code> (no VCS; local interim-development package)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code> (no VCS; virtual package)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scp</span></code> (SCP)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">svn</span></code> (SVN)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">url</span></code> (URL)</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_VCS_TYPE</span> <span class="o">=</span> <span class="s1">&#39;git&#39;</span>
</pre></div>
</div>
<p>If a project registers a custom extension which provides a custom VCS type, the
extension type can be set in this option.</p>
<p>Using a specific type will create a dependency for a project that the respective
host tool is installed on the host system. For example, if a Git VCS-type is
set, the host system will need to have <code class="docutils literal notranslate"><span class="pre">git</span></code> installed on the system.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">local</span></code> type is designed to be a special/development-helper type
only. When set, this option allows placing the contents of a module directly
inside the definition folder (alongside the definition file). This approach is
similar to using <a class="reference internal" href="user-guide.html#local-sources-mode"><span class="std std-ref">local-sources mode</span></a> where it avoids the need to have the
module content located in a site to be fetched – specifically, for initial
development/testing/training scenarios. It is never recommended to store the
package’s “main content” inside a releng-tool project, thus using the <code class="docutils literal notranslate"><span class="pre">local</span></code>
type will always generate a warning message.</p>
</div>
</div>
<div class="section" id="package-bootstrapping-and-post-processing">
<span id="package-bootstrapping-and-postprocessing"></span><h3>package bootstrapping and post-processing<a class="headerlink" href="#package-bootstrapping-and-post-processing" title="Permalink to this headline"></a></h3>
<p>Every package, no matter which package <a class="reference internal" href="#libfoo-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_TYPE</span></code></a> is defined, can create a
bootstrapping or post-processing script to invoke before a package starts a
configuration stage or after a package has completed an installation stage,
respectively.</p>
<p>The existence of a <code class="docutils literal notranslate"><span class="pre">&lt;package&gt;-bootstrap</span></code> inside a package directory will
trigger the bootstrapping stage for the package. An example bootstrapping script
(<code class="docutils literal notranslate"><span class="pre">libfoo-bootstrap</span></code>) can be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;perform bootstrapping work&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The existence of a <code class="docutils literal notranslate"><span class="pre">&lt;package&gt;-post</span></code> inside a package directory will
trigger the post-processing stage for the package. An example post-processing
script (<code class="docutils literal notranslate"><span class="pre">libfoo-post</span></code>) can be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;perform post-processing work&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Bootstrapping or post-processing scripts for a package are optional; thus, if no
scripts are provided for a package, no bootstrapping or post-processing will be
performed for the package.</p>
<p>See also <a class="reference internal" href="#script-helpers">script helpers</a> for helper functions/variables available for use.</p>
</div>
<div class="section" id="site-definitions">
<span id="id1"></span><h3>site definitions<a class="headerlink" href="#site-definitions" title="Permalink to this headline"></a></h3>
<p>The following outlines the details for defining supported site definitions. If
attempting to use an extension-provided site type, please consult the
documentation provided by said extension.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All site values can be defined with a prefix value (e.g. <code class="docutils literal notranslate"><span class="pre">git+</span></code> for Git
sources) or postfix value; however, this is optional if a package wishes to
use the <a class="reference internal" href="#libfoo-vcs-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VCS_TYPE</span></code></a> option.</p>
</div>
<div class="section" id="bazaar-site">
<h4>bazaar site<a class="headerlink" href="#bazaar-site" title="Permalink to this headline"></a></h4>
<p>To define a <a class="reference external" href="https://bazaar.canonical.com">Bazaar</a>-based location, the site value must be prefixed with a
<code class="docutils literal notranslate"><span class="pre">bzr+</span></code> value. A site can be defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;bzr+ssh://example.com/project/trunk&#39;</span>
<span class="c1"># (or)</span>
<span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;bzr+lp:&lt;project&gt;&#39;</span>
</pre></div>
</div>
<p>The value after the prefix is a path which will be provided to a <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">export</span></code>
call <a class="footnote-reference brackets" href="#bzrexport" id="id2">1</a>. Content from a Bazaar repository will be fetched and
archived into a file during fetch stage. Once a cached archive is made, the
fetch stage will be skipped unless the archive is manually removed.</p>
</div>
<div class="section" id="cvs-site">
<h4>cvs site<a class="headerlink" href="#cvs-site" title="Permalink to this headline"></a></h4>
<p>To define a <a class="reference external" href="http://cvs.nongnu.org/">CVS</a>-based location, the site value must be prefixed with a <code class="docutils literal notranslate"><span class="pre">cvs+</span></code>
or other common CVSROOT value. A site can be defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;:pserver:anonymous@cvs.example.com:/var/lib/cvsroot mymodule&#39;</span>
<span class="c1"># (or)</span>
<span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;cvs+:ext:cvs@cvs.example.org:/usr/local/cvsroot mymodule&#39;</span>
</pre></div>
</div>
<p>The value after the prefix is a space-separated pair, where the first part
represents the CVSROOT <a class="footnote-reference brackets" href="#cvsroot" id="id3">3</a> to use and the second part specifies the CVS
module <a class="footnote-reference brackets" href="#cvsmodule" id="id4">2</a>  to use. Content from a CVS repository will be fetched and
archived into a file during fetch stage. Once a cached archive is made, the
fetch stage will be skipped unless the archive is manually removed.</p>
</div>
<div class="section" id="git-site">
<h4>git site<a class="headerlink" href="#git-site" title="Permalink to this headline"></a></h4>
<p>To define a <a class="reference external" href="https://git-scm.com/">Git</a>-based location, the site value must be prefixed with a <code class="docutils literal notranslate"><span class="pre">git+</span></code>
value or postfixed with the <code class="docutils literal notranslate"><span class="pre">.git</span></code> value. A site can be defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;https://example.com/libfoo.git&#39;</span>
<span class="c1"># (or)</span>
<span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;git+git@example.com:base/libfoo.git&#39;</span>
</pre></div>
</div>
<p>The site value (less prefix, if used) is used as a Git remote <a class="footnote-reference brackets" href="#gitremote" id="id5">4</a> for
a locally managed cache source. Git sources will be cached inside the <code class="docutils literal notranslate"><span class="pre">cache</span></code>
directory on first-run. Future runs to fetch a project’s source will use the
cached Git file system. If a desired revision exists, content will be acquired
from the cache location. If a desired revision does not exist, the origin remote
will be fetched for the new revision (if it exists).</p>
</div>
<div class="section" id="mercurial-site">
<h4>mercurial site<a class="headerlink" href="#mercurial-site" title="Permalink to this headline"></a></h4>
<p>To define a <a class="reference external" href="https://www.mercurial-scm.org/">Mercurial</a>-based location, the site value must be prefixed with a
<code class="docutils literal notranslate"><span class="pre">hg+</span></code> value. A site can be defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;hg+https://example.com/project&#39;</span>
</pre></div>
</div>
<p>The value after the prefix is used as the <code class="docutils literal notranslate"><span class="pre">SOURCE</span></code> in an <code class="docutils literal notranslate"><span class="pre">hg</span> <span class="pre">clone</span></code> call
<a class="footnote-reference brackets" href="#hgclone" id="id6">5</a>. Mercurial sources will be cached inside the <code class="docutils literal notranslate"><span class="pre">cache</span></code> directory on
first-run. Future runs to fetch a project’s source will use the cached Mercurial
repository. If a desired revision exists, content will be acquired from the
cache location. If a desired revision does not exist, the origin remote will be
pulled for the new revision (if it exists).</p>
</div>
<div class="section" id="scp-site">
<h4>scp site<a class="headerlink" href="#scp-site" title="Permalink to this headline"></a></h4>
<p>To define an SCP-based location, the site value must be prefixed with a <code class="docutils literal notranslate"><span class="pre">scp+</span></code>
value. A site can be defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;scp+[user@]host:]file&#39;</span>
</pre></div>
</div>
<p>The value after the prefix is a path which will be provided to a <code class="docutils literal notranslate"><span class="pre">scp</span></code> call’s
<a class="footnote-reference brackets" href="#scpcommand" id="id7">6</a> source host value. The SCP site only supports copying a file from
a remote host. The fetched file will be stored inside the <code class="docutils literal notranslate"><span class="pre">dl</span></code> directory. Once
fetch, the fetch stage will be skipped unless the file is manually removed.</p>
</div>
<div class="section" id="svn-site">
<h4>svn site<a class="headerlink" href="#svn-site" title="Permalink to this headline"></a></h4>
<p>To define a <a class="reference external" href="https://subversion.apache.org/">Subversion</a>-based location, the site value must be prefixed with a
<code class="docutils literal notranslate"><span class="pre">svn+</span></code> value. A site can be defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;svn+https://svn.example.com/repos/libfoo/c/branches/libfoo-1.2&#39;</span>
</pre></div>
</div>
<p>The value after the prefix is a path which will be provided to a
<code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">checkout</span></code> call <a class="footnote-reference brackets" href="#svncheckout" id="id8">7</a>. Content from a Subversion repository will
be fetched and archived into a file during fetch stage. Once a cached archive
is made, the fetch stage will be skipped unless the archive is manually removed.</p>
</div>
<div class="section" id="url-site-default">
<h4>url site (default)<a class="headerlink" href="#url-site-default" title="Permalink to this headline"></a></h4>
<p>All packages that do not define a helper prefix/postfix value (as seen in other
site definitions) or do not explicitly set a <a class="reference internal" href="#libfoo-vcs-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_VCS_TYPE</span></code></a> value (other
than <code class="docutils literal notranslate"><span class="pre">url</span></code>), will be considered a URL site. A URL site can be defined as
follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_SITE</span> <span class="o">=</span> <span class="s1">&#39;https://example.com/my-file&#39;</span>
</pre></div>
</div>
<p>The site value provided will be directly used in a URL request. URL values
supported are defined by the Python’s <code class="docutils literal notranslate"><span class="pre">urlopen</span></code> implementation <a class="footnote-reference brackets" href="#urlopen" id="id9">8</a>,
which includes (but not limited to) <code class="docutils literal notranslate"><span class="pre">http(s)://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp://</span></code>, <code class="docutils literal notranslate"><span class="pre">file://</span></code> and
more.</p>
</div>
</div>
<div class="section" id="hash-file">
<span id="hash-files"></span><h3>hash file<a class="headerlink" href="#hash-file" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An alternative to using a hash to validate a package’s cache is to use an
<a class="reference internal" href="#ascii-armor"><span class="std std-ref">ASCII-armor</span></a> instead. Although users can benefit from
using both validation methods, if desired.</p>
</div>
<p>When downloading assets from a remote instance, a package’s hash file can be
used to help verify the integrity of any fetched content. For example, if a
package lists a site with a <code class="docutils literal notranslate"><span class="pre">my-archive.tgz</span></code> to download, the fetch process
will download the archive and verify its hash to a listed entry before
continuing. If a hash does not match, the build process stops indicating an
unexpected asset was downloaded.</p>
<p>It is recommended that:</p>
<ul class="simple">
<li><p>Any URL-based site asset have a hash entry defined for the asset (to ensure
the package sources are not corrupted or have been unexpectedly replaced).</p></li>
<li><p>A hash entry should exist for license files (additional sanity check if a
package’s license has change).</p></li>
</ul>
<p>To create a hash file for a package, add a <code class="docutils literal notranslate"><span class="pre">&lt;my-package&gt;.hash</span></code> file inside the
package’s directory. The hash file should be a UTF-8 encoded file and can
contain multiple hash entries. A hash entry is a 3-tuple defining the type of
hash algorithm used, the hash value expected and the asset associated with the
hash. A tuple entry is defined on a single line with each entry separated by
whitespace characters. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># my hashes
sha1 f606cb022b86086407ad735bf4ec83478dc0a2c5 my-archive.tgz
sha1 602effb4893c7504ffee8a8efcd265d86cd21609 LICENSE
</pre></div>
</div>
<p>Comments are permitted in the file. Lines leading with a <code class="docutils literal notranslate"><span class="pre">#</span></code> character or
inlined leading <code class="docutils literal notranslate"><span class="pre">#</span></code> character after a whitespace character will be ignored.</p>
<p>Officially supported hash types are FIPS-180 algorithms (<code class="docutils literal notranslate"><span class="pre">sha1</span></code>, <code class="docutils literal notranslate"><span class="pre">sha224</span></code>,
<code class="docutils literal notranslate"><span class="pre">sha256</span></code>, <code class="docutils literal notranslate"><span class="pre">sha384</span></code> and <code class="docutils literal notranslate"><span class="pre">sha512</span></code>) as well as (but not recommended) RSA’S
MD5 algorithm. Other algorithms, while unofficially supported, can be used if
provided by the system’s OpenSSL library.</p>
<p>Multiple hash entries can be provided for the same file if desired. This is to
assist in scenarios where a checked out asset’s content changes based on the
system it is checked out on. For example, a text file checked out from Git may
use Windows line-ending on Windows system, and Unix-line endings on other
systems:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sha1 602effb4893c7504ffee8a8efcd265d86cd21609 LICENSE
sha1 9e79b84ef32e911f8056d80a311cf281b2121469 LICENSE
</pre></div>
</div>
</div>
<div class="section" id="ascii-armor">
<span id="id10"></span><h3>ascii armor<a class="headerlink" href="#ascii-armor" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An alternative to using an ASCII-armor to validate a package’s cache is to
use <a class="reference internal" href="#hash-files"><span class="std std-ref">hashes</span></a> instead.</p>
</div>
<p>When downloading assets from a remote instance, an ASCII-armor file can be used
to help verify the integrity of any fetched content. For example, if a package
lists a site with a <code class="docutils literal notranslate"><span class="pre">my-archive.tgz</span></code> to download, the fetch process will
download the archive and verify its contents with an associated ASCII-armor file
(if one is provided). If the integrity of the file cannot be verified, the build
process stops indicating an unexpected asset was downloaded.</p>
<p>To include an ASCII-armor file for a package, add a <code class="docutils literal notranslate"><span class="pre">&lt;my-package&gt;.asc</span></code> file
inside the package’s directory. Verification is performed using the host
system’s <code class="docutils literal notranslate"><span class="pre">gpg</span></code>. For verification’s to succeed, the system must already have
the required public keys registered.</p>
</div>
<div class="section" id="script-package-default">
<h3>script package (default)<a class="headerlink" href="#script-package-default" title="Permalink to this headline"></a></h3>
<p>A script-based package is the most basic package type available. By default,
packages are considered to be script packages unless explicitly configured to be
another package type (<a class="reference internal" href="#libfoo-type"><code class="docutils literal notranslate"><span class="pre">LIBFOO_TYPE</span></code></a>). If a developer wishes to explicitly
configure a project as script-based, the following configuration can be used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_TYPE</span> <span class="o">=</span> <span class="s1">&#39;script&#39;</span>
</pre></div>
</div>
<p>A script package has the ability to define three Python stage scripts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package&gt;-configure</span></code> - script to invoke during the configuration stage</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package&gt;-build</span></code> - script to invoke during the build stage</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package&gt;-install</span></code> - script to invoke during the installation stage</p></li>
</ul>
<p>An example build script (<code class="docutils literal notranslate"><span class="pre">libfoo-build</span></code>) can be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="n">releng_execute</span><span class="p">([</span><span class="s1">&#39;make&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>When a package performs a configuration, build or installation stage; the
respective script (mentioned above) will be invoked. Package scripts are
optional; thus, if a script is not provided for a stage, the stage will be
skipped.</p>
<p>See also <a class="reference internal" href="#script-helpers">script helpers</a> for helper functions/variables available for use an
<a class="reference internal" href="#package-bootstrapping-and-postprocessing">bootstrapping/post-processing</a> for
more stage script support.</p>
</div>
<div class="section" id="autotools-package">
<h3>autotools package<a class="headerlink" href="#autotools-package" title="Permalink to this headline"></a></h3>
<p>An autotools package provides support for processing a <a class="reference external" href="https://www.gnu.org/software/automake/manual/html_node/index.html">GNU Build System</a>
supported module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_TYPE</span> <span class="o">=</span> <span class="s1">&#39;autotools&#39;</span>
</pre></div>
</div>
<p>When an autotools package performs a configuration stage, the package may invoke
<code class="docutils literal notranslate"><span class="pre">autoreconf</span></code> (if configured to do so) and then invoke <code class="docutils literal notranslate"><span class="pre">configure</span></code>. When the
build stage is reached, <code class="docutils literal notranslate"><span class="pre">make</span></code> will be invoked followed by <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>
during the installation stage.</p>
<p>The following sections outline configuration options are available for an
autotools package.</p>
<div class="section" id="libfoo-autotools-autoreconf">
<h4>LIBFOO_AUTOTOOLS_AUTORECONF<a class="headerlink" href="#libfoo-autotools-autoreconf" title="Permalink to this headline"></a></h4>
<p>Specifies whether or not the package needs to perform an autotools
re-configuration. This is to assist in the rebuilding of GNU Build System files
which may be broken or a patch has introduced new build script changes that need
to be applied. This field is optional. By default, <code class="docutils literal notranslate"><span class="pre">autoreconf</span></code> is not
invoked.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_AUTOTOOLS_AUTORECONF</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-build-defs">
<span id="autotools-build-defs"></span><h4>LIBFOO_BUILD_DEFS<a class="headerlink" href="#libfoo-build-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the build process. This option can is
defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-build-env">
<span id="autotools-build-env"></span><h4>LIBFOO_BUILD_ENV<a class="headerlink" href="#libfoo-build-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the build process. This
option is defined as a dictionary with key-value pairs where the key is the
environment name and the value is the environment variable’s value. This field
is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-build-opts">
<span id="autotools-build-opts"></span><h4>LIBFOO_BUILD_OPTS<a class="headerlink" href="#libfoo-build-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the build process. This
option can be defined as a dictionary of string pairs or a list with strings –
either way defined will generate argument values to include in the build event.
This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-conf-defs">
<span id="autotools-conf-defs"></span><h4>LIBFOO_CONF_DEFS<a class="headerlink" href="#libfoo-conf-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the configuration process. This option
can is defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-conf-env">
<span id="autotools-conf-env"></span><h4>LIBFOO_CONF_ENV<a class="headerlink" href="#libfoo-conf-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the configuration process.
This option is defined as a dictionary with key-value pairs where the key is
the environment name and the value is the environment variable’s value. This
field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-conf-opts">
<span id="autotools-conf-opts"></span><h4>LIBFOO_CONF_OPTS<a class="headerlink" href="#libfoo-conf-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the configuration process.
This option can be defined as a dictionary of string pairs or a list with
strings – either way defined will generate argument values to include in the
configuration event. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_CONF_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-install-defs">
<span id="autotools-install-defs"></span><h4>LIBFOO_INSTALL_DEFS<a class="headerlink" href="#libfoo-install-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the installation process. This option
can is defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-install-env">
<span id="autotools-install-env"></span><h4>LIBFOO_INSTALL_ENV<a class="headerlink" href="#libfoo-install-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the installation process.
This option is defined as a dictionary with key-value pairs where the key is
the environment name and the value is the environment variable’s value. This
field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-install-opts">
<span id="autotools-install-opts"></span><h4>LIBFOO_INSTALL_OPTS<a class="headerlink" href="#libfoo-install-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the installation process.
This option can be defined as a dictionary of string pairs or a list with
strings – either way defined will generate argument values to include in the
installation event. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cmake-package">
<h3>cmake package<a class="headerlink" href="#cmake-package" title="Permalink to this headline"></a></h3>
<p>A CMake package provides support for processing a <a class="reference external" href="https://cmake.org/">CMake</a> supported module.</p>
<p>During the configuration stage of a CMake package, <code class="docutils literal notranslate"><span class="pre">cmake</span></code> will be invoked to
generate build files for the module. For the build stage, <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span></code> will
be invoked to generated build files. Similar approach for the installation stage
where the build option is invoked again but with the <code class="docutils literal notranslate"><span class="pre">install</span></code> target invoked:
<code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">--target</span> <span class="pre">install</span></code>. Each stage can be configured to manipulate
environment variables and options used by the CMake executable.</p>
<p>The default configuration built for projects is <code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code>. A developer
can override this option by explicitly adjusting the configuration option
<code class="docutils literal notranslate"><span class="pre">--config</span></code> to, for example, <code class="docutils literal notranslate"><span class="pre">Debug</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_DEFS</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;CMAKE_BUILD_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;Debug&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;--config&#39;</span><span class="p">:</span> <span class="s1">&#39;Debug&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;--config&#39;</span><span class="p">:</span> <span class="s1">&#39;Debug&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following sections outline configuration options are available for a CMake
package.</p>
<div class="section" id="cmake-build-defs">
<span id="id11"></span><h4>LIBFOO_BUILD_DEFS<a class="headerlink" href="#cmake-build-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the build process. This option can is
defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-build-env">
<span id="id12"></span><h4>LIBFOO_BUILD_ENV<a class="headerlink" href="#cmake-build-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the build process. This
option is defined as a dictionary with key-value pairs where the key is the
environment name and the value is the environment variable’s value. This field
is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-build-opts">
<span id="id13"></span><h4>LIBFOO_BUILD_OPTS<a class="headerlink" href="#cmake-build-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the build process. This
option can be defined as a dictionary of string pairs or a list with strings –
either way defined will generate argument values to include in the build event.
This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-conf-defs">
<span id="id14"></span><h4>LIBFOO_CONF_DEFS<a class="headerlink" href="#cmake-conf-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the configuration process. This option
can is defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-conf-env">
<span id="id15"></span><h4>LIBFOO_CONF_ENV<a class="headerlink" href="#cmake-conf-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the configuration process.
This option is defined as a dictionary with key-value pairs where the key is
the environment name and the value is the environment variable’s value. This
field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-conf-opts">
<span id="id16"></span><h4>LIBFOO_CONF_OPTS<a class="headerlink" href="#cmake-conf-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the configuration process.
This option can be defined as a dictionary of string pairs or a list with
strings – either way defined will generate argument values to include in the
configuration event. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_CONF_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_CONF_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-install-defs">
<span id="id17"></span><h4>LIBFOO_INSTALL_DEFS<a class="headerlink" href="#cmake-install-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the installation process. This option
can is defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-install-env">
<span id="id18"></span><h4>LIBFOO_INSTALL_ENV<a class="headerlink" href="#cmake-install-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the installation process.
This option is defined as a dictionary with key-value pairs where the key is
the environment name and the value is the environment variable’s value. This
field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake-install-opts">
<span id="id19"></span><h4>LIBFOO_INSTALL_OPTS<a class="headerlink" href="#cmake-install-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the installation process.
This option can be defined as a dictionary of string pairs or a list with
strings – either way defined will generate argument values to include in the
installation event. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="python-package">
<h3>python package<a class="headerlink" href="#python-package" title="Permalink to this headline"></a></h3>
<p>A Python package provides support for processing a <a class="reference external" href="https://www.python.org/">Python</a> supported module.</p>
<p>Only the build and installation phases are used when processing the sources for
a Python package (i.e. no configuration stage is invoked). The build phase will
invoke <code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">build</span></code> while the installation stage will invoke
<code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">install</span></code>. When a Python package is process, it will use the system’s
default Python interpreter. A developer can override what Python interpreter to
use by configuring the <code class="docutils literal notranslate"><span class="pre">PYTHON_INTERPRETER</span></code> option in a package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_PYTHON_INTERPRETER</span> <span class="o">=</span> <span class="s1">&#39;/opt/my-custom-python-build/python&#39;</span>
</pre></div>
</div>
<p>The following sections outline configuration options are available for a Python
package.</p>
<div class="section" id="python-build-defs">
<span id="id20"></span><h4>LIBFOO_BUILD_DEFS<a class="headerlink" href="#python-build-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the build process. This option can is
defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="python-build-env">
<span id="id21"></span><h4>LIBFOO_BUILD_ENV<a class="headerlink" href="#python-build-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the build process. This
option is defined as a dictionary with key-value pairs where the key is the
environment name and the value is the environment variable’s value. This field
is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="python-build-opts">
<span id="id22"></span><h4>LIBFOO_BUILD_OPTS<a class="headerlink" href="#python-build-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the build process. This
option can be defined as a dictionary of string pairs or a list with strings –
either way defined will generate argument values to include in the build event.
This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_BUILD_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="python-install-defs">
<span id="id23"></span><h4>LIBFOO_INSTALL_DEFS<a class="headerlink" href="#python-install-defs" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass definitions into the installation process. This option
can is defined as a dictionary of string pairs. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option=value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="python-install-env">
<span id="id24"></span><h4>LIBFOO_INSTALL_ENV<a class="headerlink" href="#python-install-env" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass environment variables into the installation process.
This option is defined as a dictionary with key-value pairs where the key is
the environment name and the value is the environment variable’s value. This
field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="python-install-opts">
<span id="id25"></span><h4>LIBFOO_INSTALL_OPTS<a class="headerlink" href="#python-install-opts" title="Permalink to this headline"></a></h4>
<p>Provides a means to pass command line options into the installation process.
This option can be defined as a dictionary of string pairs or a list with
strings – either way defined will generate argument values to include in the
installation event. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># adds &quot;--option value&quot; to the command</span>
    <span class="s1">&#39;--option&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># (or)</span>

<span class="n">LIBFOO_INSTALL_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># adds &quot;--some-option&quot; to the command</span>
    <span class="s1">&#39;--some-option&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="libfoo-python-interpreter">
<span id="python-interpreter"></span><h4>LIBFOO_PYTHON_INTERPRETER<a class="headerlink" href="#libfoo-python-interpreter" title="Permalink to this headline"></a></h4>
<p>Defines a specific Python interpreter when processing the build and
installation stages for a package. If not specified, the system’s Python
interpreter will be used. This field is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBFOO_PYTHON_INTERPRETER</span> <span class="o">=</span> <span class="s1">&#39;&lt;path&gt;&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="other">
<h2>other<a class="headerlink" href="#other" title="Permalink to this headline"></a></h2>
<div class="section" id="post-processing">
<h3>post-processing<a class="headerlink" href="#post-processing" title="Permalink to this headline"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A post-processing script (if used) will be invoked each time <code class="docutils literal notranslate"><span class="pre">releng-tool</span></code>
reaches the final stage of a build.</p>
</div>
<p>After each package has been processed, a project has the ability to perform
post-processing. Post-processing allows a developer to cleanup the target
directory, build an archive/package from generated results and more. If a
project contains a <code class="docutils literal notranslate"><span class="pre">releng-post-build</span></code> inside the root directory, the
post-processing script will be invoked in the final stage of a build.</p>
<p>A developer may start out with the following post-processing script
<code class="docutils literal notranslate"><span class="pre">&lt;root&gt;/releng-post-build</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;post processing...&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above script will output the newly inserted print message at the end of a
build process:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> releng-tool
<span class="go">...</span>
<span class="go">generating license information...</span>
<span class="go">post processing...</span>
<span class="go">(success) completed (0:01:30)</span>
</pre></div>
</div>
<p>A developer can take advantage of <a class="reference internal" href="#environment-variables">environment variables</a> and
<a class="reference internal" href="#script-helpers">script helpers</a> for additional support.</p>
<p>It is important to note that a post-processing script will be invoked each time
a <code class="docutils literal notranslate"><span class="pre">releng-tool</span></code> invoke reaches the final stage of a build. A developer should
attempt to implement the post-processing script in a way that it can be invoked
multiple times. For example, if a developer decides to move a file out of the
target directory into an interim directory when building an archive, it is most
likely that a subsequent request to build may fail since the file can no longer
be found inside the target directory.</p>
</div>
<div class="section" id="licenses">
<span id="license-information"></span><h3>licenses<a class="headerlink" href="#licenses" title="Permalink to this headline"></a></h3>
<p>A releng-tool project can defined multiple packages, each with the possibility
of having multiple licenses associated with them. Each project may vary: some
may have only proprietary sources and may not care about tracking this
information; some may only use open source software and require to populate
license information for a final package; or a mix.</p>
<p>When license information is populated for a project, each project’s license
information (<a class="reference internal" href="#libfoo-license-files"><code class="docutils literal notranslate"><span class="pre">LIBFOO_LICENSE_FILES</span></code></a>) is will be populated into a single license
document. If a developer defines the <a class="reference internal" href="#conf-license-header"><code class="docutils literal notranslate"><span class="pre">license_header</span></code></a> configuration,
the generated document will be prefixed with the header content. For example,
<code class="docutils literal notranslate"><span class="pre">releng</span></code> can be configured to prepare a license header from a local file
<code class="docutils literal notranslate"><span class="pre">assets/license-header.tpl</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="o">...</span> <span class="p">(</span><span class="n">other</span> <span class="n">configuration</span> <span class="n">options</span><span class="p">)</span>

<span class="n">root_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="n">license_header_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="s1">&#39;assets&#39;</span><span class="p">,</span> <span class="s1">&#39;license-header.tpl&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">license_header_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">license_header</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>
</pre></div>
</div>
<p>A side note is that licenses for a project are generated before the
<a class="reference internal" href="#post-processing">post-processing</a> phase; hence, generated license document(s) may be included
when attempting to generated final archives/packages.</p>
</div>
<div class="section" id="patching">
<h3>patching<a class="headerlink" href="#patching" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Patches are ignored when in <a class="reference internal" href="user-guide.html#development-mode"><span class="std std-ref">development mode</span></a> for packages with a
development version revision or when in <a class="reference internal" href="user-guide.html#local-sources-mode"><span class="std std-ref">local-sources mode</span></a> for
internal packages.</p>
</div>
<p>The patching stage for a package provides the ability for a developer to apply
one or more patches to extracted sources. A project may define an external
package which fetches an archive that is not maintained by the project owners.
The fetched source may not be able to build in a developer’s releng-tool project
due to limitations of the implementation or build scripts provided by the
package. A developer can prepare a series of patches to apply to a package and
submit changes upstream to correct the issue; however, the developer is then
left to either wait for the changes to be merged in or needs to make a custom
archive with the appropriate modifications already applied. To avoid this, a
developer can include patches directly in the package folder to be automatically
applied during patching stage.</p>
<p>When a package’s patch stage is reached, releng-tool will look for patches found
inside the package folder with the extension <code class="docutils literal notranslate"><span class="pre">.patch</span></code>. Patches found inside a
package folder are applied in ascending order. It is recommended to prefix
patch filenames with a numerical value for clarity. For example, the following
package patches:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> package/liba
<span class="gp">$</span> ls *.patch
<span class="go">0001-accept-linker-flags.patch</span>
<span class="go">0002-correct-output-path.patch</span>
<span class="go">0003-support-disabling-test-build.patch</span>
<span class="go">liba</span>
<span class="go">lib.hash</span>
</pre></div>
</div>
<p>With be applied in the following order:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0001-accept-linker-flags.patch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0002-correct-output-path.patch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0003-support-disabling-test-build.patch</span></code></p></li>
</ol>
<p>If a user configures their build environment in <a class="reference internal" href="user-guide.html#development-mode"><span class="std std-ref">development mode</span></a>, patches
will not be applied if a package defines a development revisions. The idea is
that a development revision is most likely the bleeding edge source of a
package and does not need any patches. If a user configures their build
environment in <a class="reference internal" href="user-guide.html#local-sources-mode"><span class="std std-ref">local-sources mode</span></a> and a package is defined as internal,
patches will not be applied to the sources. This is to prevent the patching
system from making unexpected modifications to a developer’s local source
variants.</p>
</div>
<div class="section" id="internal-and-external-packages">
<h3>internal and external packages<a class="headerlink" href="#internal-and-external-packages" title="Permalink to this headline"></a></h3>
<p>Packages are either internal packages or external packages. All packages are
considered external packages by default unless explicitly configured as internal
through either the package option <a class="reference internal" href="#libfoo-internal"><code class="docutils literal notranslate"><span class="pre">LIBFOO_INTERNAL</span></code></a> or using the project
configuration <a class="reference internal" href="#conf-default-intern"><code class="docutils literal notranslate"><span class="pre">default_internal</span></code></a> (see also <a class="reference internal" href="#libfoo-external"><code class="docutils literal notranslate"><span class="pre">LIBFOO_EXTERNAL</span></code></a>). Both package
types are almost treated the same except for the following:</p>
<ul class="simple">
<li><p>An internal package will not generate output warnings if the package is
missing <a class="reference internal" href="#hash-files"><span class="std std-ref">hash information</span></a> or an
<a class="reference internal" href="#ascii-armor"><span class="std std-ref">ASCII-armor</span></a>.</p></li>
<li><p>An internal package will not generate output warnings if the package is
missing <a class="reference internal" href="#license-information"><span class="std std-ref">license information</span></a>.</p></li>
<li><p>When configured for <a class="reference internal" href="user-guide.html#development-mode"><span class="std std-ref">development mode</span></a>; the patch stage will not be
performed if the package specifies a development revision
(<a class="reference internal" href="#libfoo-devmode-revision"><code class="docutils literal notranslate"><span class="pre">LIBFOO_DEVMODE_REVISION</span></code></a>).</p></li>
<li><p>When configured for <a class="reference internal" href="user-guide.html#local-sources-mode"><span class="std std-ref">local-sources mode</span></a>; the fetch, extract and patch
stages will not be performed.</p></li>
</ul>
</div>
<div class="section" id="script-helpers">
<h3>script helpers<a class="headerlink" href="#script-helpers" title="Permalink to this headline"></a></h3>
<p>releng-tool provides a series of helper functions which can be used in
script-based packages, post-processing and more. Helper functions provided are
listed below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>method</p></th>
<th class="head"><p>documentation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">debug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log a debug message</p>
<p>Logs a debug message to standard out with a trailing new line. By default,
debug messages will not be output to standard out unless the instance is
configured with debugging enabled.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;this is a debug message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">err</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">err</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log an error message</p>
<p>Logs an error message to standard error with a trailing new line and (if
enabled) a red colorization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">err</span><span class="p">(</span><span class="s1">&#39;this is an error message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">log</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log a message</p>
<p>Logs a (normal) message to standard out with a trailing new line.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;this is a message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">note</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">note</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log a notification message</p>
<p>Logs a notification message to standard out with a trailing new line and (if
enabled) an inverted colorization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">note</span><span class="p">(</span><span class="s1">&#39;this is a note message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_copy</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">critical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>copy a file or directory into a target file or directory</p>
<p>This call will attempt to copy a provided file or directory, defined by
<code class="docutils literal notranslate"><span class="pre">src</span></code> into a destination file or directory defined by <code class="docutils literal notranslate"><span class="pre">dst</span></code>. If <code class="docutils literal notranslate"><span class="pre">src</span></code>
is a file, then <code class="docutils literal notranslate"><span class="pre">dst</span></code> is considered to be a file or directory; if <code class="docutils literal notranslate"><span class="pre">src</span></code>
is a directory, <code class="docutils literal notranslate"><span class="pre">dst</span></code> is considered a target directory. If a target
directory or target file’s directory does not exist, it will be
automatically created. In the event that a file or directory could not be
copied, an error message will be output to standard error (unless <code class="docutils literal notranslate"><span class="pre">quiet</span></code>
is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>). If <code class="docutils literal notranslate"><span class="pre">critical</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and the specified
file/directory could not be copied for any reason, this call will issue a
system exit (<code class="docutils literal notranslate"><span class="pre">SystemExit</span></code>).</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># (stage)</span>
<span class="c1"># my-file</span>
<span class="n">releng_copy</span><span class="p">(</span><span class="s1">&#39;my-file&#39;</span><span class="p">,</span> <span class="s1">&#39;my-file2&#39;</span><span class="p">)</span>
<span class="c1"># (stage)</span>
<span class="c1"># my-file</span>
<span class="c1"># my-file2</span>
<span class="n">releng_copy</span><span class="p">(</span><span class="s1">&#39;my-file&#39;</span><span class="p">,</span> <span class="s1">&#39;my-directory/&#39;</span><span class="p">)</span>
<span class="c1"># (stage)</span>
<span class="c1"># my-directory/my-file</span>
<span class="c1"># my-file</span>
<span class="c1"># my-file2</span>
<span class="n">releng_copy</span><span class="p">(</span><span class="s1">&#39;my-directory/&#39;</span><span class="p">,</span> <span class="s1">&#39;my-directory2/&#39;</span><span class="p">)</span>
<span class="c1"># (stage)</span>
<span class="c1"># my-directory/my-file</span>
<span class="c1"># my-directory2/my-file</span>
<span class="c1"># my-file</span>
<span class="c1"># my-file2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> – the source directory or file</p></li>
<li><p><strong>dst</strong> – the destination directory or file* (*if <code class="docutils literal notranslate"><span class="pre">src</span></code> is a file)</p></li>
<li><p><strong>quiet</strong> (<em>optional</em>) – whether or not to suppress output</p></li>
<li><p><strong>critical</strong> (<em>optional</em>) – whether or not to stop execution on failure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the copy has completed with no error; <code class="docutils literal notranslate"><span class="pre">False</span></code> if the copy
has failed</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>SystemExit</strong> – if the copy operation fails with <code class="docutils literal notranslate"><span class="pre">critical=True</span></code></p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_env</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">key</span></em>, <em class="sig-param"><span class="pre">value=&lt;object</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span></dt>
<dd><p>helper to easily fetch or configure an environment variable</p>
<p>Provides a caller a simple method to fetch or configure an environment
variable for the current context. This call is the same as if one directly
fetched from or managed a key-value with <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>. If <code class="docutils literal notranslate"><span class="pre">value</span></code> is not
provided, the environment variable’s value (if set) will be returned. If
<code class="docutils literal notranslate"><span class="pre">value</span></code> is set to a value of <code class="docutils literal notranslate"><span class="pre">None</span></code>, any set environment variable will
be removed.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># get an environment variable</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">releng_env</span><span class="p">(</span><span class="s1">&#39;KEY&#39;</span><span class="p">)</span>

<span class="c1"># set an environment variable</span>
<span class="n">releng_env</span><span class="p">(</span><span class="s1">&#39;KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – the environment key</p></li>
<li><p><strong>value</strong> (<em>optional</em>) – the environment value to set</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the value of the environment variable</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_execute</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">critical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>execute the provided command/arguments</p>
<p>Runs the command described by <code class="docutils literal notranslate"><span class="pre">args</span></code> until completion. A caller can adjust
the working directory of the executed command by explicitly setting the
directory in <code class="docutils literal notranslate"><span class="pre">cwd</span></code>. The execution request will return <code class="docutils literal notranslate"><span class="pre">True</span></code> on a
successful execution; <code class="docutils literal notranslate"><span class="pre">False</span></code> if an issue has been detected (e.g. bad
options or called process returns a non-zero value). In the event that the
execution fails, an error message will be output to standard error unless
<code class="docutils literal notranslate"><span class="pre">quiet</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>The environment variables used on execution can be manipulated in two ways.
First, the environment can be explicitly controlled by applying a new
environment content using the <code class="docutils literal notranslate"><span class="pre">env</span></code> dictionary. Key of the dictionary will
be used as environment variable names, whereas the respective values will be
the respective environment variable’s value. If <code class="docutils literal notranslate"><span class="pre">env</span></code> is not provided, the
existing environment of the executing context will be used. Second, a caller
can instead update the existing environment by using the <code class="docutils literal notranslate"><span class="pre">env_update</span></code>
option. Like <code class="docutils literal notranslate"><span class="pre">env</span></code>, the key-value pairs match to respective environment
key-value pairs. The difference with this option is that the call will use
the original environment values and update select values which match in the
updated environment request. When <code class="docutils literal notranslate"><span class="pre">env</span></code> and <code class="docutils literal notranslate"><span class="pre">env_update</span></code> are both
provided, <code class="docutils literal notranslate"><span class="pre">env_update</span></code> will be updated the options based off of <code class="docutils literal notranslate"><span class="pre">env</span></code>
instead of the original environment of the caller.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">critical</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and the execution fails for any reason,
this call will issue a system exit (<code class="docutils literal notranslate"><span class="pre">SystemExit</span></code>). By default, the
critical flag is enabled (i.e. <code class="docutils literal notranslate"><span class="pre">critical=True</span></code>).</p>
<p>In special cases, an executing process may not provide carriage returns/new
lines to simple output processing. This can lead the output of a process to
be undesirably buffered. To workaround this issue, the execution call can
instead poll for output results by using the <code class="docutils literal notranslate"><span class="pre">poll</span></code> option with a value
of <code class="docutils literal notranslate"><span class="pre">True</span></code>. By default, polling is disabled with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>A caller may wish to capture the provided output from a process for
examination. If a list is provided in the call argument <code class="docutils literal notranslate"><span class="pre">capture</span></code>, the
list will be populated with the output provided from an invoked process.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">releng_execute</span><span class="p">([</span><span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="s1">&#39;$TEST&#39;</span><span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;TEST&#39;</span><span class="p">:</span> <span class="s1">&#39;this is a test&#39;</span><span class="p">})</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – the list of arguments to execute</p></li>
<li><p><strong>cwd</strong> (<em>optional</em>) – working directory to use</p></li>
<li><p><strong>env</strong> (<em>optional</em>) – environment variables to use for the process</p></li>
<li><p><strong>env_update</strong> (<em>optional</em>) – environment variables to append for the process</p></li>
<li><p><strong>quiet</strong> (<em>optional</em>) – whether or not to suppress output (defaults to
<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><strong>critical</strong> (<em>optional</em>) – whether or not to stop execution on failure
(defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
<li><p><strong>poll</strong> (<em>optional</em>) – force polling stdin/stdout for output data (defaults to
<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><strong>capture</strong> (<em>optional</em>) – list to capture output into</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the execution has completed with no error; <code class="docutils literal notranslate"><span class="pre">False</span></code> if the
execution has failed</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>SystemExit</strong> – if the execution operation fails with <code class="docutils literal notranslate"><span class="pre">critical=True</span></code></p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_execute_rv</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_execute_rv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>execute the provided command/arguments</p>
<p>Runs the command <code class="docutils literal notranslate"><span class="pre">command</span></code> with provided <code class="docutils literal notranslate"><span class="pre">args</span></code> until completion. A
caller can adjust the working directory of the executed command by
explicitly setting the directory in <code class="docutils literal notranslate"><span class="pre">cwd</span></code>. The execution request will
return the command’s return code as well as any captured output.</p>
<p>The environment variables used on execution can be manipulated in two ways.
First, the environment can be explicitly controlled by applying a new
environment content using the <code class="docutils literal notranslate"><span class="pre">env</span></code> dictionary. Key of the dictionary will
be used as environment variable names, whereas the respective values will be
the respective environment variable’s value. If <code class="docutils literal notranslate"><span class="pre">env</span></code> is not provided, the
existing environment of the executing context will be used. Second, a caller
can instead update the existing environment by using the <code class="docutils literal notranslate"><span class="pre">env_update</span></code>
option. Like <code class="docutils literal notranslate"><span class="pre">env</span></code>, the key-value pairs match to respective environment
key-value pairs. The difference with this option is that the call will use
the original environment values and update select values which match in the
updated environment request. When <code class="docutils literal notranslate"><span class="pre">env</span></code> and <code class="docutils literal notranslate"><span class="pre">env_update</span></code> are both
provided, <code class="docutils literal notranslate"><span class="pre">env_update</span></code> will be updated the options based off of <code class="docutils literal notranslate"><span class="pre">env</span></code>
instead of the original environment of the caller.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rv</span><span class="p">,</span> <span class="n">out</span> <span class="o">=</span> <span class="n">releng_execute_rv</span><span class="p">(</span><span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="s1">&#39;$TEST&#39;</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;TEST&#39;</span><span class="p">:</span> <span class="s1">&#39;env-test&#39;</span><span class="p">})</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> – the command to invoke</p></li>
<li><p><strong>*args</strong> (<em>optional</em>) – arguments to add to the command</p></li>
<li><p><strong>**cwd</strong> – working directory to use</p></li>
<li><p><strong>**env</strong> – environment variables to use for the process</p></li>
<li><p><strong>**env_update</strong> – environment variables to append for the process</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the return code and output of the execution request</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_exists</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>return whether or not the path exists</p>
<p>Allows a caller to verify the existence of a file on the file system. This
call will return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the path exists; <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">releng_exists</span><span class="p">(</span><span class="s1">&#39;my-file&#39;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;the file exists&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;the file does not exist&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – the path</p></li>
<li><p><strong>*args</strong> – additional path parts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the path exists; <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_exit</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_exit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>exit out of the releng-tool process</p>
<p>Provides a convenience method to help invoke a system exit call without
needing to explicitly use <code class="docutils literal notranslate"><span class="pre">sys</span></code>. A caller can provide a message to
indicate the reason for the exit. The provide message will output to
standard error. The exit code, if not explicit set, will vary on other
arguments. If a message is provided to this call, the default exit code will
be <code class="docutils literal notranslate"><span class="pre">1</span></code>. If no message is provided, the default exit code will be <code class="docutils literal notranslate"><span class="pre">0</span></code>.
In any case, if the caller explicitly sets a code value, the provided code
value will be used.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">releng_exit</span><span class="p">(</span><span class="s1">&#39;there was an error performing this task&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> (<em>optional</em>) – error message to print</p></li>
<li><p><strong>code</strong> (<em>optional</em>) – exit code; defaults to 0 if no message or defaults to 1
if a message is set</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SystemExit</strong> – always raised</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_expand</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>perform variable expansion on strings</p>
<p>This expand utility method will attempt to expand variables in detected
string types. For a detected string which contains substrings in the form of
<code class="docutils literal notranslate"><span class="pre">$value</span></code> or <code class="docutils literal notranslate"><span class="pre">${value}</span></code>, these substrings will be replaced with their
respective key-value (if provided) or environment variable value. For
substrings which do not have a matching variable value, the substrings will
be replaced with an empty value. If a dictionary is provided, keys and
values will be checked if they can be expanded on. If a list/set is
provided, each value which be checked if it can be expanded on. If a
dictionary key is expanded to match another key, a key-value pair can be
dropped. If a set may result in a smaller set if expanded values result in
duplicate entries.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="o">...</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_ENV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;my-environment-variable&#39;</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">releng_expand</span><span class="p">(</span><span class="s1">&#39;$MY_ENV&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># will output: my-environment-variable</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – the object</p></li>
<li><p><strong>kv</strong> (<em>optional</em>) – key-values pairs to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the expanded object</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_join</span></code></p></td>
<td><dl class="py method">
<dt class="sig sig-object py" id="releng_tool.releng_join">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">paths</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#releng_tool.releng_join" title="Permalink to this definition"></a></dt>
<dd><p>An alias for <a class="reference external" href="https://docs.python.org/library/os.path.html#os.path.join"><code class="docutils literal notranslate"><span class="pre">os.path.join</span></code></a>.</p>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_mkdir</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>ensure the provided directory exists</p>
<p>Attempts to create the provided directory. If the directory already exists,
this method has no effect. If the directory does not exist and could not be
created, this method will return <code class="docutils literal notranslate"><span class="pre">False</span></code>. Also, if an error has been
detected, an error message will be output to standard error (unless
<code class="docutils literal notranslate"><span class="pre">quiet</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">releng_mkdir</span><span class="p">(</span><span class="s1">&#39;my-directory&#39;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;directory was created&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;directory was not created&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir</strong> – the directory</p></li>
<li><p><strong>quiet</strong> (<em>optional</em>) – whether or not to suppress output (defaults to
<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the directory exists; <code class="docutils literal notranslate"><span class="pre">False</span></code> if the directory could not
be created</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_move</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">critical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>move a file or directory into a target file or directory</p>
<p>This call will attempt to move a provided file or directory’s contents,
defined by <code class="docutils literal notranslate"><span class="pre">src</span></code> into a destination file or directory defined by <code class="docutils literal notranslate"><span class="pre">dst</span></code>.
If <code class="docutils literal notranslate"><span class="pre">src</span></code> is a file, then <code class="docutils literal notranslate"><span class="pre">dst</span></code> is considered to be a file or directory;
if <code class="docutils literal notranslate"><span class="pre">src</span></code> is a directory, <code class="docutils literal notranslate"><span class="pre">dst</span></code> is considered a target directory. If a
target directory or target file’s directory does not exist, it will be
automatically created.</p>
<p>In the event that a file or directory could not be moved, an error message
will be output to standard error (unless <code class="docutils literal notranslate"><span class="pre">quiet</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>). If
<code class="docutils literal notranslate"><span class="pre">critical</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and the specified file/directory could not
be moved for any reason, this call will issue a system exit
(<code class="docutils literal notranslate"><span class="pre">SystemExit</span></code>).</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># (input)</span>
<span class="c1"># my-directory/another-file</span>
<span class="c1"># my-file</span>
<span class="c1"># my-file2</span>
<span class="n">releng_move</span><span class="p">(</span><span class="s1">&#39;my-file&#39;</span><span class="p">,</span> <span class="s1">&#39;my-file3&#39;</span><span class="p">)</span>
<span class="n">releng_move</span><span class="p">(</span><span class="s1">&#39;my-directory/&#39;</span><span class="p">,</span> <span class="s1">&#39;my-directory2/&#39;</span><span class="p">)</span>
<span class="n">releng_move</span><span class="p">(</span><span class="s1">&#39;my-file2&#39;</span><span class="p">,</span> <span class="s1">&#39;my-directory2/&#39;</span><span class="p">)</span>
<span class="c1"># (output)</span>
<span class="c1"># my-directory2/another-file</span>
<span class="c1"># my-directory2/my-file2</span>
<span class="c1"># my-file3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> – the source directory or file</p></li>
<li><p><strong>dst</strong> – the destination directory or file* (*if <code class="docutils literal notranslate"><span class="pre">src</span></code> is a file)</p></li>
<li><p><strong>quiet</strong> (<em>optional</em>) – whether or not to suppress output</p></li>
<li><p><strong>critical</strong> (<em>optional</em>) – whether or not to stop execution on failure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the move has completed with no error; <code class="docutils literal notranslate"><span class="pre">False</span></code> if the move
has failed</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>SystemExit</strong> – if the copy operation fails with <code class="docutils literal notranslate"><span class="pre">critical=True</span></code></p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_remove</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>remove the provided path</p>
<p>Attempts to remove the provided path if it exists. The path value can either
be a directory or a specific file. If the provided path does not exist, this
method has no effect. In the event that a file or directory could not be
removed due to an error other than unable to be found, an error message will
be output to standard error (unless <code class="docutils literal notranslate"><span class="pre">quiet</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">releng_remove</span><span class="p">(</span><span class="s1">&#39;my-file&#39;</span><span class="p">)</span>
<span class="c1"># (or)</span>
<span class="n">releng_remove</span><span class="p">(</span><span class="s1">&#39;my-directory/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – the path to remove</p></li>
<li><p><strong>quiet</strong> (<em>optional</em>) – whether or not to suppress output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the path was removed or does not exist; <code class="docutils literal notranslate"><span class="pre">False</span></code> if the
path could not be removed from the system</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_tmpdir</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_tmpdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>generate a context-supported temporary directory</p>
<p>Creates a temporary directory in the provided directory <code class="docutils literal notranslate"><span class="pre">dir_</span></code> (or system
default, is not provided). This is a context-supported call and will
automatically remove the directory when completed. If the provided
directory does not exist, it will created. If the directory could not be
created, an <code class="docutils literal notranslate"><span class="pre">FailedToPrepareBaseDirectoryError</span></code> exception will be thrown.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">releng_tmpdir</span><span class="p">()</span> <span class="k">as</span> <span class="n">dir_</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dir_</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir</strong> (<em>optional</em>) – the directory to create the temporary directory in</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FailedToPrepareBaseDirectoryError</strong> – the base directory does not exist and
    could not be created</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">releng_touch</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_touch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>update a file’s access/modifications times</p>
<p>Attempts to update the access/modifications times on a file. If the file
does not exist, it will be created. This utility call operates in the same
fashion as the <code class="docutils literal notranslate"><span class="pre">touch</span></code> system command.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">releng_touch</span><span class="p">(</span><span class="s1">&#39;my-file&#39;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;file was created&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;file was not created&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> – the file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file was created/updated; <code class="docutils literal notranslate"><span class="pre">False</span></code> if the file could
not be created/updated</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">releng_wd</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">releng_wd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>move into a context-supported working directory</p>
<p>Moves the current context into the provided working directory <code class="docutils literal notranslate"><span class="pre">dir</span></code>. When
returned, the original working directory will be restored. If the provided
directory does not exist, it will created. If the directory could not be
created, an <code class="docutils literal notranslate"><span class="pre">FailedToPrepareWorkingDirectoryError</span></code> exception will be
thrown.</p>
<p>An example when using in the context of script helpers is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">releng_wd</span><span class="p">(</span><span class="s1">&#39;my-directory/&#39;</span><span class="p">):</span>
    <span class="c1"># invoked in &#39;my-directory&#39;</span>

<span class="c1"># invoked in original working directory</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir</strong> – the target working directory</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FailedToPrepareWorkingDirectoryError</strong> – the working directory does not
    exist and could not be created</p>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">success</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">success</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log a success message</p>
<p>Logs a success message to standard error with a trailing new line and (if
enabled) a green colorization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">success</span><span class="p">(</span><span class="s1">&#39;this is a success message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">verbose</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">verbose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log a verbose message</p>
<p>Logs a verbose message to standard out with a trailing new line and (if
enabled) an inverted colorization. By default, verbose messages will not be
output to standard out unless the instance is configured with verbosity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">verbose</span><span class="p">(</span><span class="s1">&#39;this is a verbose message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">warn</span></code></p></td>
<td><dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">releng_tool.</span></span><span class="sig-name descname"><span class="pre">warn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>log a warning message</p>
<p>Logs a warning message to standard error with a trailing new line and (if
enabled) a purple colorization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;this is a warning message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – the message</p></li>
<li><p><strong>*args</strong> – an arbitrary set of positional and keyword arguments used when
generating a formatted message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</td>
</tr>
</tbody>
</table>
<p>Scripts directly invoked by releng-tool will automatically have these helpers
registered in the script’s globals module (i.e. no import is necessary). If a
project defines custom Python modules in their project and wishes to take
advantage of these helper functions, the following import can be used to, for
example, import a specific function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">releng_tool</span> <span class="kn">import</span> <span class="n">releng_execute</span>
</pre></div>
</div>
<p>Or, if desired, all helper methods can be imported at once:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">releng_tool</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="section" id="vcs-ignore">
<h3>vcs ignore<a class="headerlink" href="#vcs-ignore" title="Permalink to this headline"></a></h3>
<p>When invoking releng-tool on a project, the project’s root directory will be
populated with cached assets and other output files. A series of standard ignore
patterns can be applied to a repository to prevent observing these generated
files using VCS tools. The following is an example ignore configuration which
can be applied for Git-based repositories (via <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># releng-tool
/cache/
/dl/
/output/
.releng-flag-*
</pre></div>
</div>
</div>
<div class="section" id="quirks">
<span id="id26"></span><h3>quirks<a class="headerlink" href="#quirks" title="Permalink to this headline"></a></h3>
<p>The following outlines a series of configuration <a class="reference internal" href="#conf-quirks"><code class="docutils literal notranslate"><span class="pre">quirks</span></code></a> that can be
applied to deal with rare host environment scenarios.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">releng.cmake.disable_parallel_option</span></code> – Disables the <code class="docutils literal notranslate"><span class="pre">--parallel</span></code> option
from being injected when a CMake-package is performing a build stage. This is
to help support host systems running variants of CMake which do not explicitly
provide a parallelization option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">releng.disable_prerequisites_check</span></code> – Disables the fast-fail prerequisites
check from running.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">releng.disable_remote_configs</span></code> – Disables any attempt to load
remote-defined configurations for a package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">releng.disable_remote_scripts</span></code> – Disables any attempt to load
remote-defined scripts for a package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">releng.git.no_depth</span></code> – Disables the <code class="docutils literal notranslate"><span class="pre">--depth</span></code> option from being injected
when a Git-site-defined package is performing a fetch stage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">releng.git.no_quick_fetch</span></code> – Disables quick fetching (a specific reference
fetch) for any Git-site-defined package.</p></li>
</ul>
<p>Quirks are enabled through a configuration (override) script such as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">quirks</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;&lt;quirk-value&gt;&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-extensions">
<h3>loading extensions<a class="headerlink" href="#loading-extensions" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If looking for information on developing extensions for releng-tool, consult
the <a class="reference internal" href="contributor-guide.html#contributor-guide-ext"><span class="std std-ref">contributor’s guide – extensions</span></a>.</p>
</div>
<p>A releng-tool project can define one or more extensions to load for externally
implemented capabilities. For example, a project can load extensions
<code class="docutils literal notranslate"><span class="pre">ext-a</span></code> and <code class="docutils literal notranslate"><span class="pre">ext-b</span></code> with the following defined in their project’s
configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ext-a&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ext-b&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>During the initial stages of a release engineering process, releng-tool will
check and load any configured extension. In the event that an extension is
missing, is unsupported for the running releng-tool version or fails to load, a
detailed error message will be presented to the user.</p>
<p>While the ability to load extensions is supported, capabilities provided by
extensions are not officially supported by releng-tool. For issues related to
specific extension use, it is recommended to consult the documentation provided
by the providers of said extensions.</p>
<dl class="footnote brackets">
<dt class="label" id="bzrexport"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="http://doc.bazaar.canonical.com/bzr.2.7/en/user-reference/export-help.html">http://doc.bazaar.canonical.com/bzr.2.7/en/user-reference/export-help.html</a></p>
</dd>
<dt class="label" id="cvsmodule"><span class="brackets"><a class="fn-backref" href="#id4">2</a></span></dt>
<dd><p><a class="reference external" href="https://www.gnu.org/software/trans-coord/manual/cvs/html_node/checkout.html#checkout">https://www.gnu.org/software/trans-coord/manual/cvs/html_node/checkout.html#checkout</a></p>
</dd>
<dt class="label" id="cvsroot"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p><a class="reference external" href="https://www.gnu.org/software/trans-coord/manual/cvs/html_node/Specifying-a-repository.html">https://www.gnu.org/software/trans-coord/manual/cvs/html_node/Specifying-a-repository.html</a></p>
</dd>
<dt class="label" id="gitremote"><span class="brackets"><a class="fn-backref" href="#id5">4</a></span></dt>
<dd><p><a class="reference external" href="https://git-scm.com/docs/git-remote">https://git-scm.com/docs/git-remote</a></p>
</dd>
<dt class="label" id="hgclone"><span class="brackets"><a class="fn-backref" href="#id6">5</a></span></dt>
<dd><p><a class="reference external" href="https://www.selenic.com/mercurial/hg.1.html#clone">https://www.selenic.com/mercurial/hg.1.html#clone</a></p>
</dd>
<dt class="label" id="scpcommand"><span class="brackets"><a class="fn-backref" href="#id7">6</a></span></dt>
<dd><p><a class="reference external" href="https://linux.die.net/man/1/scp">https://linux.die.net/man/1/scp</a></p>
</dd>
<dt class="label" id="svncheckout"><span class="brackets"><a class="fn-backref" href="#id8">7</a></span></dt>
<dd><p><a class="reference external" href="http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.checkout.html">http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.checkout.html</a></p>
</dd>
<dt class="label" id="urlopen"><span class="brackets"><a class="fn-backref" href="#id9">8</a></span></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3.7/library/urllib.request.html#urllib.request.urlopen">https://docs.python.org/3.7/library/urllib.request.html#urllib.request.urlopen</a></p>
</dd>
</dl>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user-guide.html" class="btn btn-neutral float-left" title="user guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contributor-guide.html" class="btn btn-neutral float-right" title="contributor guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions">
<span class="rst-current-version" data-toggle="rst-current-version">
  <span class="icon icon-book"></span>
  development
  <span class="icon icon-caret-down"></span>
</span>
<div class="rst-other-versions">
  <dl>
    <dt>Languages</dt>
    
      <dd><a href="https://docs.releng.io/en/development/">en</a></dd>
    
      <dd><a href="https://docs.releng.io/de/development/">de</a></dd>
    
      <dd><a href="https://docs.releng.io/ja/development/">ja</a></dd>
    
      <dd><a href="https://docs.releng.io/pl/development/">pl</a></dd>
    
      <dd><a href="https://docs.releng.io/zh/development/">zh</a></dd>
    
  </dl>
  <dl>
    <dt>Versions</dt>
    
      <dd><a href="https://docs.releng.io/en/latest/">latest</a></dd>
    
      <dd><a href="https://docs.releng.io/en/0.8/">0.8</a></dd>
    
      <dd><a href="https://docs.releng.io/en/0.7/">0.7</a></dd>
    
      <dd><a href="https://docs.releng.io/en/0.6/">0.6</a></dd>
    
      <dd><a href="https://docs.releng.io/en/0.5/">0.5</a></dd>
    
  </dl>
  <dl>
    <dd><a href="https://docs.releng.io/en/development/">development</a></dd>
  </dl>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>